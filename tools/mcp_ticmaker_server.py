#!/usr/bin/env python3
"""
TICMaker MCP Server for SimaCode
ä¸“é—¨å¤„ç†äº’åŠ¨æ•™å­¦HTMLé¡µé¢åˆ›å»ºå’Œä¿®æ”¹çš„MCPæœåŠ¡å™¨
æ”¯æŒå¤šç§æ¨¡æ¿ç±»å‹å’Œæ™ºèƒ½å†…å®¹ç”Ÿæˆ
"""

import asyncio
import json
import logging
import os
import sys
import uuid
import yaml
from datetime import datetime
from pathlib import Path
from typing import Any, Dict, List, Optional

# AI client imports
try:
    import openai
except ImportError:
    openai = None
    
try:
    import anthropic
except ImportError:
    anthropic = None

TICMAKER_PROMPT = """
TICMakeræ˜¯ä¸€ä¸ªåŸºäºAIæŠ€æœ¯æ¥è®¾è®¡æ•™å­¦äº’åŠ¨é¡¹ç›®ï¼ˆæ¯”å¦‚æé—®ä¸å›ç­”ï¼ŒæŠ•ç¥¨ä¸é€‰æ‹©é¢˜ï¼Œç®€å•é¢˜ä¸è¯äº‘ï¼Œéšå ‚æµ‹è¯•ï¼Œå°ç»„è®¨è®ºï¼Œå¤´è„‘é£æš´ï¼ŒçŸ­å‘¨æœŸé¡¹ç›®æ¨¡å—ï¼ŒåŸºç¡€æ¨¡æ‹Ÿå®éªŒï¼Œç¼–ç¨‹ä¸ä»£ç è¿è¡Œï¼Œæ¸¸æˆåŒ–å­¦ä¹ å¾½ç« ï¼Œå­¦ç”Ÿå±•ç¤ºä¸äº’è¯„ï¼Œè™šæ‹Ÿç”»å»Šæ¼«æ­¥ï¼‰ä¸æ•™å­¦å¤šæ¨¡æ€å†…å®¹ç”Ÿæˆï¼ˆHTMLäº’åŠ¨æ¸¸æˆï¼ŒAIç”Ÿæˆè§†é¢‘ï¼ŒAIç”Ÿæˆå›¾ç‰‡ï¼ŒAIç”Ÿæˆä»£ç ï¼ŒAIè¯­éŸ³åˆæˆï¼ŒAIéŸ³é¢‘ç”Ÿæˆï¼Œè„‘å›¾ç”Ÿæˆï¼Œæµç¨‹å›¾ç”Ÿæˆï¼Œç§‘å­¦è®¡ç®—å™¨ï¼Œ3Dæ¨¡å‹å¯è§†åŒ–ï¼Œæ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Œå¤šè¯­è¨€ç¿»è¯‘ï¼Œä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ï¼Œè‡ªé€‚åº”é¢˜åº“ï¼Œæƒ…å¢ƒåŒ–æ¡ˆä¾‹ï¼‰ç»“åˆè¾“å‡ºçš„é¡¹ç›®ã€‚

## äº’åŠ¨é¡¹ç›®ä¸å¤šæ¨¡æ€å†…å®¹çš„ååŒå…³ç³»

TICMakerçš„æ ¸å¿ƒä»·å€¼åœ¨äºå°†**äº’åŠ¨é¡¹ç›®**å’Œ**å¤šæ¨¡æ€å†…å®¹**æœ‰æœºç»“åˆï¼Œè€Œä¸æ˜¯ç‹¬ç«‹ç”Ÿæˆä¸¤è€…ï¼š

### ååŒè®¾è®¡ç†å¿µ
- **äº’åŠ¨é¡¹ç›®**æä¾›äº¤äº’æ¡†æ¶å’Œæ•™å­¦é€»è¾‘ï¼Œæ˜¯"å®¹å™¨"
- **å¤šæ¨¡æ€å†…å®¹**ä½œä¸ºæ•™å­¦ç´ æå¡«å……åˆ°äº’åŠ¨é¡¹ç›®ä¸­ï¼Œæ˜¯"å†…å®¹"
- **ä¸¤è€…ååŒ**åˆ›é€ å®Œæ•´çš„æ²‰æµ¸å¼æ•™å­¦ä½“éªŒï¼Œæ˜¯"æ•ˆæœ"

### é›†æˆåº”ç”¨ç¤ºä¾‹
```
ğŸ¯ éšå ‚æµ‹è¯•äº’åŠ¨é¡¹ç›® + AIç”Ÿæˆé¢˜ç›®é…å›¾ + è¯­éŸ³æ’­æŠ¥ = å¤šæ„Ÿå®˜æµ‹è¯•ä½“éªŒ
ğŸ–¼ï¸ è™šæ‹Ÿç”»å»Šæ¼«æ­¥ + AIç”Ÿæˆ3Dæ¨¡å‹ + ç¯å¢ƒéŸ³æ•ˆ = æ²‰æµ¸å¼å­¦ä¹ ç©ºé—´  
â˜ï¸ è¯äº‘ç”Ÿæˆäº’åŠ¨ + AIç”ŸæˆèƒŒæ™¯å›¾ç‰‡ + åŠ¨æ€æ•ˆæœ = è§†è§‰åŒ–æ¦‚å¿µå±•ç¤º
ğŸ® HTMLäº’åŠ¨æ¸¸æˆ + AIç”Ÿæˆè§’è‰²å›¾åƒ + èƒŒæ™¯éŸ³ä¹ = æ¸¸æˆåŒ–å­¦ä¹ ä½“éªŒ
```

### ç»Ÿä¸€è¾“å‡ºäº§ç‰©
TICMakeræœ€ç»ˆäº¤ä»˜ç»™è€å¸ˆçš„æ˜¯ï¼š
- âœ… **é›†æˆå¼äº’åŠ¨ç»„ä»¶**ï¼šæ¯ä¸ªäº’åŠ¨é¡¹ç›®éƒ½å·²æ•´åˆç›¸åº”çš„å¤šæ¨¡æ€ç´ æ
- âœ… **å³ç”¨å‹HTMLåŒ…**ï¼šåŒ…å«å®Œæ•´çš„ä»£ç ã€ç´ æå’Œé…ç½®æ–‡ä»¶
- âœ… **ä½¿ç”¨æŒ‡å—æ–‡æ¡£**ï¼šè¯¦ç»†çš„é›†æˆè¯´æ˜å’Œè‡ªå®šä¹‰æŒ‡å¼•
- âœ… **åœ¨çº¿æ¼”ç¤ºé¢„è§ˆ**ï¼šæ•™å¸ˆå¯ç›´æ¥ä½“éªŒæœ€ç»ˆæ•ˆæœ

## ååŒåº”ç”¨å®ä¾‹

ä»¥ä¸‹å®ä¾‹å±•ç¤ºäº†å¤šæ¨¡æ€å†…å®¹å¦‚ä½•ä¸æ•™å­¦äº’åŠ¨é¡¹ç›®æ·±åº¦èåˆï¼Œåˆ›é€ å®Œæ•´çš„æ•™å­¦ä½“éªŒï¼š

### 1. **è„‘å›¾ + æ•™å­¦äº’åŠ¨é¡¹ç›®çš„ç»“åˆ**

#### **è„‘å›¾ + å¤´è„‘é£æš´äº’åŠ¨é¡¹ç›®**
```
ğŸ“š æ•™å­¦å†…å®¹ï¼šç”Ÿç‰©è¯¾"ç”Ÿæ€ç³»ç»Ÿ"
ğŸ§  AIç”Ÿæˆè„‘å›¾ï¼šç”Ÿæ€ç³»ç»Ÿæ¦‚å¿µå›¾ï¼ˆç”Ÿäº§è€…â†’æ¶ˆè´¹è€…â†’åˆ†è§£è€…â†’éç”Ÿç‰©å› å­ï¼‰
ğŸ’¡ é›†æˆåˆ°å¤´è„‘é£æš´äº’åŠ¨ï¼š
   â€¢ å­¦ç”Ÿåœ¨è„‘å›¾å„èŠ‚ç‚¹ä¸Šæ·»åŠ å…·ä½“ä¾‹å­
   â€¢ å®æ—¶åä½œå®Œå–„ç”Ÿæ€ç³»ç»Ÿå…³ç³»å›¾  
   â€¢ æœ€ç»ˆç”Ÿæˆç­çº§å…±åŒçš„çŸ¥è¯†è„‘å›¾
ğŸ¯ æ•™å­¦æ•ˆæœï¼šç†è®ºæ¡†æ¶å¯è§†åŒ– + å­¦ç”Ÿä¸»åŠ¨æ„å»ºçŸ¥è¯†
```

#### **è„‘å›¾ + éšå ‚æµ‹è¯•äº’åŠ¨é¡¹ç›®**
```
ğŸ“š æ•™å­¦å†…å®¹ï¼šå†å²è¯¾"è¾›äº¥é©å‘½"
ğŸ§  AIç”Ÿæˆè„‘å›¾ï¼šè¾›äº¥é©å‘½æ—¶é—´çº¿å’Œå…³é”®äººç‰©å…³ç³»å›¾
ğŸ“ é›†æˆåˆ°éšå ‚æµ‹è¯•ï¼š
   â€¢ æµ‹è¯•é¢˜ç›®ä»¥"åœ¨è„‘å›¾ä¸­æ‰¾åˆ°..."çš„å½¢å¼å‡ºç°
   â€¢ å­¦ç”Ÿç‚¹å‡»è„‘å›¾ç›¸åº”èŠ‚ç‚¹æ¥å›ç­”é—®é¢˜
   â€¢ ç­”é¢˜è¿‡ç¨‹ä¸­è„‘å›¾èŠ‚ç‚¹ä¼šé«˜äº®æ˜¾ç¤ºç›¸å…³ä¿¡æ¯
ğŸ¯ æ•™å­¦æ•ˆæœï¼šçŸ¥è¯†æ£€æµ‹ + è§†è§‰åŒ–å­¦ä¹ å¼ºåŒ–
```

### 2. **ç§‘å­¦è®¡ç®—å™¨+å…¬å¼ + æ•™å­¦äº’åŠ¨é¡¹ç›®çš„ç»“åˆ**

#### **è®¡ç®—å™¨+å…¬å¼ + åŸºç¡€æ¨¡æ‹Ÿå®éªŒ**
```
ğŸ“š æ•™å­¦å†…å®¹ï¼šç‰©ç†è¯¾"è‡ªç”±è½ä½“è¿åŠ¨"
ğŸ”¬ AIç”Ÿæˆå·¥å…·ï¼š
   â€¢ è‡ªç”±è½ä½“å…¬å¼æ¸²æŸ“ (h = Â½gtÂ²)
   â€¢ ç‰©ç†è®¡ç®—å™¨ï¼ˆæ”¯æŒé‡åŠ›åŠ é€Ÿåº¦è®¡ç®—ï¼‰
âš—ï¸ é›†æˆåˆ°æ¨¡æ‹Ÿå®éªŒï¼š
   â€¢ è™šæ‹Ÿå®éªŒï¼šè°ƒæ•´ç‰©ä½“é«˜åº¦ï¼Œè§‚å¯Ÿä¸‹è½æ—¶é—´
   â€¢ å®æ—¶è®¡ç®—å™¨æ˜¾ç¤ºå½“å‰å‚æ•°ä¸‹çš„ç†è®ºå€¼
   â€¢ å­¦ç”Ÿå¯¹æ¯”å®éªŒç»“æœä¸å…¬å¼è®¡ç®—ç»“æœ
   â€¢ å…¬å¼åŠ¨æ€å±•ç¤ºå‚æ•°å˜åŒ–å¯¹ç»“æœçš„å½±å“
ğŸ¯ æ•™å­¦æ•ˆæœï¼šç†è®ºå…¬å¼ + å®éªŒéªŒè¯ + æ•°æ®åˆ†æ
```

#### **è®¡ç®—å™¨+å…¬å¼ + å°ç»„è®¨è®º**
```
ğŸ“š æ•™å­¦å†…å®¹ï¼šæ•°å­¦è¯¾"äºŒæ¬¡å‡½æ•°"
ğŸ“Š AIç”Ÿæˆå·¥å…·ï¼š
   â€¢ äºŒæ¬¡å‡½æ•°å…¬å¼ç»„ (y=axÂ²+bx+c, é¡¶ç‚¹å…¬å¼, åˆ¤åˆ«å¼ç­‰)
   â€¢ å›¾å½¢è®¡ç®—å™¨ï¼ˆå®æ—¶ç»˜åˆ¶å‡½æ•°å›¾åƒï¼‰
ğŸ‘¥ é›†æˆåˆ°å°ç»„è®¨è®ºï¼š
   â€¢ å„å°ç»„åˆ†é…ä¸åŒçš„a,b,cå‚æ•°
   â€¢ ä½¿ç”¨è®¡ç®—å™¨å·¥å…·åˆ†æå‡½æ•°æ€§è´¨
   â€¢ å°ç»„é—´åˆ†äº«å‘ç°çš„è§„å¾‹
   â€¢ å…¬å¼å·¥å…·å¸®åŠ©éªŒè¯å’Œè§£é‡Šç°è±¡
ğŸ¯ æ•™å­¦æ•ˆæœï¼šæ•°å­¦å»ºæ¨¡ + åä½œæ¢ç©¶ + è§„å¾‹å‘ç°
```

### 3. **æµç¨‹å›¾ + æ•™å­¦äº’åŠ¨é¡¹ç›®çš„ç»“åˆ**

#### **æµç¨‹å›¾ + ç¼–ç¨‹ä¸ä»£ç è¿è¡Œ**
```
ğŸ“š æ•™å­¦å†…å®¹ï¼šä¿¡æ¯æŠ€æœ¯è¯¾"ç®—æ³•è®¾è®¡"  
ğŸ“‹ AIç”Ÿæˆæµç¨‹å›¾ï¼šæ’åºç®—æ³•æ­¥éª¤å›¾ï¼ˆå†’æ³¡æ’åºï¼‰
ğŸ’» é›†æˆåˆ°ç¼–ç¨‹äº’åŠ¨ï¼š
   â€¢ å­¦ç”Ÿæ ¹æ®æµç¨‹å›¾ç¼–å†™ä»£ç 
   â€¢ ä»£ç è¿è¡Œæ—¶ï¼Œæµç¨‹å›¾å¯¹åº”æ­¥éª¤ä¼šé«˜äº®
   â€¢ è°ƒè¯•æ—¶å¯ä»¥é€æ­¥è·Ÿè¸ªæµç¨‹å›¾æ‰§è¡Œè·¯å¾„
   â€¢ ç†è®ºï¼ˆæµç¨‹å›¾ï¼‰ä¸å®è·µï¼ˆä»£ç ï¼‰å¯¹ç…§å­¦ä¹ 
ğŸ¯ æ•™å­¦æ•ˆæœï¼šç®—æ³•ç†è§£ + ç¼–ç¨‹å®è·µ + è°ƒè¯•æ€ç»´
```

#### **æµç¨‹å›¾ + è™šæ‹Ÿç”»å»Šæ¼«æ­¥**
```
ğŸ“š æ•™å­¦å†…å®¹ï¼šåŒ–å­¦è¯¾"åˆ¶å–æ°§æ°”å®éªŒ"
ğŸ“‹ AIç”Ÿæˆæµç¨‹å›¾ï¼šå®Œæ•´å®éªŒæ­¥éª¤æµç¨‹
ğŸ›ï¸ é›†æˆåˆ°è™šæ‹Ÿç”»å»Šï¼š
   â€¢ 3Dè™šæ‹Ÿå®éªŒå®¤åœºæ™¯
   â€¢ å­¦ç”ŸæŒ‰æµç¨‹å›¾æŒ‡ç¤º"æ¼«æ­¥"åˆ°ä¸åŒå®éªŒå°
   â€¢ æ¯ä¸ªæ­¥éª¤å¯¹åº”è™šæ‹Ÿç©ºé—´ä¸­çš„æ“ä½œç‚¹
   â€¢ æµç¨‹å›¾ä½œä¸ºå¯¼èˆªåœ°å›¾å¼•å¯¼å®éªŒè¿›ç¨‹
ğŸ¯ æ•™å­¦æ•ˆæœï¼šæ²‰æµ¸å¼ä½“éªŒ + ç¨‹åºåŒ–æ“ä½œ + å®‰å…¨å®éªŒ
```

### 4. **AIéŸ³é¢‘ + æ•™å­¦äº’åŠ¨é¡¹ç›®çš„ç»“åˆ**

#### **AIéŸ³é¢‘ + å­¦ç”Ÿå±•ç¤ºä¸äº’è¯„**
```
ğŸ“š æ•™å­¦å†…å®¹ï¼šè‹±è¯­è¯¾"è¯—æ­Œæœ—è¯µ"
ğŸµ AIç”ŸæˆéŸ³é¢‘ï¼šæ ‡å‡†å‘éŸ³ç¤ºèŒƒ + èƒŒæ™¯éŸ³ä¹
ğŸ­ é›†æˆåˆ°å±•ç¤ºäº’è¯„ï¼š
   â€¢ å­¦ç”Ÿå½•åˆ¶è‡ªå·±çš„æœ—è¯µéŸ³é¢‘
   â€¢ AIç¤ºèŒƒéŸ³é¢‘ä½œä¸ºå‚è€ƒæ ‡å‡†æ’­æ”¾
   â€¢ åŒå­¦ä»¬å¯¹æ¯”è¯„ä»·å‘éŸ³å‡†ç¡®æ€§
   â€¢ èƒŒæ™¯éŸ³ä¹å¢å¼ºæœ—è¯µçš„æ„ŸæŸ“åŠ›
ğŸ¯ æ•™å­¦æ•ˆæœï¼šæ ‡å‡†ç¤ºèŒƒ + åŒä¼´è¯„è®® + è‰ºæœ¯æ„ŸæŸ“
```

#### **AIéŸ³é¢‘ + è™šæ‹Ÿç”»å»Šæ¼«æ­¥**
```
ğŸ“š æ•™å­¦å†…å®¹ï¼šå†å²è¯¾"å¤ä»£æ–‡æ˜"
ğŸµ AIç”ŸæˆéŸ³é¢‘ï¼šå¤å…¸éŸ³ä¹é£æ ¼çš„èƒŒæ™¯éŸ³ + æ–‡æ˜ä»‹ç»æ—ç™½
ğŸ›ï¸ é›†æˆåˆ°è™šæ‹Ÿç”»å»Šï¼š
   â€¢ å­¦ç”Ÿ"æ¼«æ­¥"åœ¨å¤æ–‡æ˜è™šæ‹Ÿåšç‰©é¦†ä¸­
   â€¢ ä¸åŒåŒºåŸŸæ’­æ”¾ç›¸åº”çš„èƒŒæ™¯éŸ³ä¹
   â€¢ ç‚¹å‡»æ–‡ç‰©æ—¶æ’­æ”¾AIç”Ÿæˆçš„ä»‹ç»æ—ç™½
   â€¢ æ²‰æµ¸å¼çš„å¤šæ„Ÿå®˜å­¦ä¹ ä½“éªŒ
ğŸ¯ æ•™å­¦æ•ˆæœï¼šæƒ…å¢ƒè¥é€  + å¤šæ„Ÿå®˜åˆºæ¿€ + æ–‡åŒ–ä½“éªŒ
```

### 5. **å¤šç§å¤šæ¨¡æ€å†…å®¹çš„ç»„åˆåº”ç”¨**

#### **ç»¼åˆæ¡ˆä¾‹ï¼šæ•°å­¦è¯¾"ä¸‰è§’å‡½æ•°"**
```
ğŸ“š æ•™å­¦å†…å®¹ï¼šé«˜ä¸­æ•°å­¦"ä¸‰è§’å‡½æ•°"
ğŸ AIç”Ÿæˆå¤šæ¨¡æ€å†…å®¹åŒ…ï¼š
   â€¢ è„‘å›¾ï¼šä¸‰è§’å‡½æ•°å…³ç³»å›¾
   â€¢ ç§‘å­¦è®¡ç®—å™¨ï¼šä¸‰è§’å‡½æ•°è®¡ç®—å™¨
   â€¢ æµç¨‹å›¾ï¼šæ±‚è§£ä¸‰è§’æ–¹ç¨‹æ­¥éª¤
   â€¢ AIéŸ³é¢‘ï¼šé‡ç‚¹æ¦‚å¿µè¯­éŸ³è§£é‡Š

ğŸ“‹ é›†æˆåˆ°äº’åŠ¨é¡¹ç›®ç»„åˆï¼š

1ï¸âƒ£ è¯¾å ‚å¯¼å…¥ (æé—®ä¸å›ç­” + è„‘å›¾)
   â€¢ å±•ç¤ºä¸‰è§’å‡½æ•°æ¦‚å¿µè„‘å›¾
   â€¢ å­¦ç”Ÿå›ç­”å„å‡½æ•°é—´çš„å…³ç³»

2ï¸âƒ£ æ¦‚å¿µå­¦ä¹  (åŸºç¡€æ¨¡æ‹Ÿå®éªŒ + è®¡ç®—å™¨)
   â€¢ è™šæ‹Ÿå•ä½åœ†å®éªŒ
   â€¢ å®æ—¶è®¡ç®—å™¨æ˜¾ç¤ºå‡½æ•°å€¼å˜åŒ–

3ï¸âƒ£ ç»ƒä¹ å·©å›º (éšå ‚æµ‹è¯• + æµç¨‹å›¾)
   â€¢ è§£é¢˜æ­¥éª¤è·Ÿéšæµç¨‹å›¾æŒ‡å¯¼
   â€¢ æµ‹è¯•é¢˜ç›®ç»“åˆå…·ä½“è§£é¢˜æµç¨‹

4ï¸âƒ£ æ€»ç»“å›é¡¾ (è¯äº‘ç”Ÿæˆ + AIéŸ³é¢‘)
   â€¢ å­¦ç”Ÿè¾“å…¥å­¦ä¹ å¿ƒå¾—ç”Ÿæˆè¯äº‘
   â€¢ AIéŸ³é¢‘æ’­æ”¾é‡ç‚¹çŸ¥è¯†æ€»ç»“

ğŸ¯ æ•™å­¦æ•ˆæœï¼šå®Œæ•´å­¦ä¹ é—­ç¯ + å¤šç»´åº¦äº’åŠ¨ + ä¸ªæ€§åŒ–ä½“éªŒ
```

## ååŒä»·å€¼ä½“ç°

### ğŸš€ **æ•™å­¦æ•ˆæœå¢å¼º**
- **ç†è®ºä¸å®è·µç»“åˆ**ï¼šå…¬å¼ç†è®º + è®¡ç®—å™¨å®è·µéªŒè¯
- **å¤šæ„Ÿå®˜åˆºæ¿€å­¦ä¹ **ï¼šè§†è§‰è„‘å›¾ + å¬è§‰éŸ³é¢‘ + æ“ä½œäº’åŠ¨
- **é€‚åº”å­¦ä¹ å·®å¼‚**ï¼šä¸åŒç±»å‹ç´ ææ»¡è¶³ä¸åŒå­¦ä¹ é£æ ¼

### ğŸ’¡ **äº’åŠ¨æ·±åº¦æå‡**
- **ä»è¢«åŠ¨åˆ°ä¸»åŠ¨**ï¼šä¸å†æ˜¯ç®€å•æŸ¥çœ‹ï¼Œè€Œæ˜¯æ“ä½œå’Œæ¢ç´¢  
- **ä»å•ä¸€åˆ°ç»¼åˆ**ï¼šå¤šç§ç´ æç±»å‹ååŒæ”¯æŒå¤æ‚äº’åŠ¨
- **ä»é™æ€åˆ°åŠ¨æ€**ï¼šå®æ—¶è®¡ç®—ã€åŠ¨æ€å›¾è¡¨ã€äº¤äº’å¼å†…å®¹

### âš™ï¸ **æŠ€æœ¯å®ç°ä¼˜åŠ¿**
- **ä¸€ä½“åŒ–é›†æˆ**ï¼šæ‰€æœ‰ç´ æè‡ªåŠ¨é€‚é…åˆ°äº’åŠ¨é¡¹ç›®ä¸­
- **æ™ºèƒ½å…³è”åŒ¹é…**ï¼šAIåˆ†ææ•™å­¦å†…å®¹ï¼Œæ™ºèƒ½åŒ¹é…æœ€ä¼˜ç´ æç»„åˆ
- **å¼€ç®±å³ç”¨**ï¼šæ•™å¸ˆè·å¾—å®Œæ•´å¯ç”¨çš„äº’åŠ¨ç»„ä»¶ï¼Œè€Œéé›¶æ•£ç´ æ

ç»“åˆç”¨æˆ·ï¼ˆè€å¸ˆï¼‰è¾“å…¥çš„ä¸€æ®µæ•™å­¦å†…å®¹åŠæ•™å­¦ç›®æ ‡ï¼ŒTICMakerä¼šæŒ‰ç…§ä»¥ä¸‹GenAIé©±åŠ¨çš„6æ­¥ä¼˜åŒ–æµç¨‹æ¥æ•´åˆåŸæ¥çš„æ•™å­¦å†…å®¹ã€ç»“åˆå¤šæ¨¡æ€äº’åŠ¨å†…å®¹çš„æ•™å­¦äº’åŠ¨é¡¹ç›®è®¾è®¡åäº§ç”Ÿä¸€ä¸ªå…¨æ–°çš„æ•™æã€‚

## TICMakeræ•™æç”Ÿæˆæµç¨‹

### Step 1: çŸ¥è¯†ç‚¹GenAIæ™ºèƒ½è§£æï¼ˆ3åˆ†é’Ÿï¼‰
**æµç¨‹**ï¼šè¾“å…¥å†…å®¹ â†’ GenAIæ·±åº¦ç†è§£ â†’ çŸ¥è¯†ç»“æ„åˆ†æ â†’ æ•™å­¦è¦ç´ æå–

**GenAIåˆ†æèƒ½åŠ›ï¼š**
- **å¤šæ¨¡æ€å†…å®¹ç†è§£**ï¼šå¤„ç†æ–‡æœ¬ã€å›¾ç‰‡ã€è¡¨æ ¼ã€å…¬å¼ä¸­çš„ä¿¡æ¯
- **ä¸Šä¸‹æ–‡æ¨ç†**ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ·±åº¦è¯­ä¹‰ç†è§£ï¼Œå‡†ç¡®è¯†åˆ«éšå«çš„æ•™å­¦æ„å›¾
- **çŸ¥è¯†å›¾è°±æ„å»º**ï¼šè‡ªåŠ¨ç”ŸæˆçŸ¥è¯†ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»å’Œä¾èµ–ç»“æ„
- **æ•™å­¦åœºæ™¯é€‚é…**ï¼šç†è§£ä¸åŒå­¦ç§‘çš„æ•™å­¦ç‰¹ç‚¹å’Œè®¤çŸ¥è§„å¾‹

**åˆ†æç»´åº¦ï¼š**
- æŠ½è±¡ç¨‹åº¦ï¼ˆå…·ä½“â†”æŠ½è±¡ï¼‰
- é€»è¾‘å¤æ‚æ€§ï¼ˆç®€å•â†”å¤æ‚ï¼‰
- åº”ç”¨åœºæ™¯ï¼ˆç†è®ºâ†”å®è·µï¼‰
- è®°å¿†è´Ÿè·ï¼ˆä½â†”é«˜ï¼‰

### Step 2: æ•™å­¦ç­–ç•¥GenAIæ™ºèƒ½æ¨èï¼ˆ2åˆ†é’Ÿï¼‰
**æµç¨‹**ï¼šGenAIç­–ç•¥åˆ†æ â†’ ä¸ªæ€§åŒ–æ¨è â†’ äº’åŠ¨æ–¹æ¡ˆç”Ÿæˆ â†’ æ—¶é—´åˆ†é…ä¼˜åŒ–

**æ¨èé€»è¾‘ï¼š**
- **æ¦‚å¿µç±»çŸ¥è¯†**ï¼šæ¦‚å¿µå›¾+è¯äº‘+é—®ç­” â†’ ç†è§£å·©å›º
- **ç¨‹åºç±»çŸ¥è¯†**ï¼šæ­¥éª¤æ¼”ç¤º+æ¨¡æ‹Ÿæ“ä½œ+ç»ƒä¹  â†’ æŠ€èƒ½æŒæ¡
- **äº‹å®ç±»çŸ¥è¯†**ï¼šå›¾åƒè®°å¿†+æ¸¸æˆåŒ–+æµ‹è¯• â†’ è®°å¿†å¼ºåŒ–
- **åŸç†ç±»çŸ¥è¯†**ï¼šæ¡ˆä¾‹åˆ†æ+å®éªŒæ¨¡æ‹Ÿ+è®¨è®º â†’ æ·±åº¦ç†è§£

**æ—¶é—´åˆ†é…æ¨¡å‹ï¼š**
å¯¼å…¥(5min) + æ ¸å¿ƒå­¦ä¹ (20min) + äº’åŠ¨å¼ºåŒ–(15min) + æ€»ç»“è¯„ä¼°(5min)

### Step 3: å¤šæ¨¡æ€å†…å®¹GenAIåˆ›ä½œï¼ˆ5åˆ†é’Ÿï¼‰
**æµç¨‹**ï¼šGenAIå†…å®¹ç†è§£ â†’ å¤šæ¨¡æ€ååŒç”Ÿæˆ â†’ æ•™è‚²é€‚é…ä¼˜åŒ– â†’ è´¨é‡æ™ºèƒ½ç­›é€‰

**ç”Ÿæˆç­–ç•¥ä¼˜å…ˆçº§ï¼š**

**é«˜ä¼˜å…ˆçº§ï¼ˆå¿…ç”Ÿæˆï¼‰ï¼š**
- ğŸ“Š çŸ¥è¯†ç‚¹æ¦‚å¿µå›¾ï¼šå¸®åŠ©å»ºç«‹çŸ¥è¯†ç»“æ„
- ğŸ¨ å…³é”®ä¿¡æ¯å¯è§†åŒ–ï¼šå›¾è¡¨ã€æµç¨‹å›¾ã€ç¤ºæ„å›¾
- â“ 3-5ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šæ£€æµ‹ç†è§£ç¨‹åº¦
- ğŸ“ äº’åŠ¨ç»ƒä¹ é¢˜ï¼šå³æ—¶åé¦ˆå’Œå·©å›º

**ä¸­ä¼˜å…ˆçº§ï¼ˆæ¡ä»¶ç”Ÿæˆï¼‰ï¼š**
- ğŸ® ç®€å•äº’åŠ¨æ¸¸æˆï¼šé€‚åˆè®°å¿†æ€§å†…å®¹
- ğŸ¬ è§£é‡Šæ€§å¾®è§†é¢‘ï¼šå¤æ‚æ¦‚å¿µçš„åŠ¨æ€æ¼”ç¤º
- ğŸ—£ï¸ è¯­éŸ³è®²è§£ï¼šé‡ç‚¹å†…å®¹çš„éŸ³é¢‘è§£é‡Š
- ğŸ“± ç§»åŠ¨ç«¯é€‚é…ï¼šå“åº”å¼ç•Œé¢ä¼˜åŒ–

**ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰ç”Ÿæˆï¼‰ï¼š**
- ğŸ¥½ 3Dæ¨¡å‹å±•ç¤ºï¼šç©ºé—´ç»“æ„ç›¸å…³å†…å®¹
- ğŸ¤ å°ç»„åä½œä»»åŠ¡ï¼šéœ€è¦æ·±åº¦æ€è€ƒçš„å†…å®¹
- ğŸ† æˆå°±å¾½ç« ç³»ç»Ÿï¼šé•¿æœŸæ¿€åŠ±æœºåˆ¶

### Step 4: æ•™å­¦æµç¨‹GenAIæ™ºèƒ½ç¼–æ’ï¼ˆ3åˆ†é’Ÿï¼‰
**æµç¨‹**ï¼šGenAIæµç¨‹è§„åˆ’ â†’ è®¤çŸ¥è´Ÿè·åˆ†æ â†’ å­¦ä¹ è·¯å¾„ä¼˜åŒ– â†’ ä¸ªæ€§åŒ–è°ƒæ•´

**ç¼–æ’åŸåˆ™ï¼š**
- **7Â±2è§„å¾‹**ï¼šæ¯æ¬¡å‘ˆç°ä¿¡æ¯ä¸è¶…è¿‡9ä¸ªè¦ç‚¹
- **äº’åŠ¨é¢‘æ¬¡**ï¼šæ¯3-5åˆ†é’Ÿå®‰æ’ä¸€æ¬¡äº’åŠ¨
- **éš¾æ˜“æ­é…**ï¼šç®€å•â†’å¤æ‚â†’ç®€å•çš„æ³¢æµªå¼éš¾åº¦
- **å¤šæ„Ÿå®˜åˆºæ¿€**ï¼šè§†è§‰ã€å¬è§‰ã€è§¦è§‰çš„åˆç†æ­é…

**æ™ºèƒ½æ’åºç®—æ³•ï¼š**
å¼€åœºæ¿€å‘å…´è¶£ â†’ æ¦‚å¿µå»ºç«‹ â†’ ç†è§£æ·±åŒ– â†’ åº”ç”¨ç»ƒä¹  â†’ æ€»ç»“å¼ºåŒ–

### Step 5: GenAIä¸ªæ€§åŒ–é€‚é…ä¸è°ƒæ•´ï¼ˆ2åˆ†é’Ÿï¼‰
**æµç¨‹**ï¼šGenAIç”¨æˆ·ç”»åƒåˆ†æ â†’ æ™ºèƒ½é€‚é…ç­–ç•¥ â†’ å†…å®¹é£æ ¼è°ƒä¼˜ â†’ äº¤äº’æ¨¡å¼é€‰æ‹©

**é€‚é…ç»´åº¦ï¼š**
- **å­¦æ®µé€‚é…**ï¼šå°å­¦ç”Ÿ(æ¸¸æˆåŒ–) â†’ åˆä¸­ç”Ÿ(æ¢ç©¶å¼) â†’ é«˜ä¸­ç”Ÿ(é—®é¢˜å¯¼å‘) â†’ å¤§å­¦ç”Ÿ(æ¡ˆä¾‹åˆ†æ)
- **å­¦ç§‘ç‰¹ç‚¹**ï¼šç†ç§‘(é€»è¾‘æ¨ç†) â†’ æ–‡ç§‘(æƒ…æ„Ÿå…±é¸£) â†’ è‰ºæœ¯(å®¡ç¾ä½“éªŒ)
- **æ•™å¸ˆåå¥½**ï¼šä¼ ç»Ÿå‹ â†’ åˆ›æ–°å‹ â†’ æŠ€æœ¯å‹
- **è®¾å¤‡æ¡ä»¶**ï¼šåŸºç¡€ç‰ˆ â†’ æ ‡å‡†ç‰ˆ â†’ é«˜çº§ç‰ˆ

### Step 6: GenAIè´¨é‡æ£€æµ‹ä¸ä¼˜åŒ–è¾“å‡ºï¼ˆ5åˆ†é’Ÿï¼‰
**æµç¨‹**ï¼šGenAIå¤šç»´åº¦è¯„ä¼° â†’ æ™ºèƒ½é—®é¢˜å‘ç° â†’ è‡ªåŠ¨ä¼˜åŒ–è¿­ä»£ â†’ æœ€ç»ˆç‰ˆæœ¬ç”Ÿæˆ

**è´¨é‡æ£€æµ‹æ¸…å•ï¼š**
- âœ… çŸ¥è¯†å‡†ç¡®æ€§ï¼ˆGenAI+äººå·¥åŒé‡éªŒè¯ï¼‰
- âœ… æ•™å­¦ç›®æ ‡å¯¹é½æ€§
- âœ… äº’åŠ¨é€»è¾‘åˆç†æ€§
- âœ… æŠ€æœ¯å®ç°å¯è¡Œæ€§
- âœ… ç”¨æˆ·ä½“éªŒå‹å¥½æ€§

**è¾“å‡ºæ ¼å¼ï¼š**
æ ‡å‡†åŒ–HTML5æ•™å­¦é¡µé¢ + æ•™å¸ˆä½¿ç”¨æŒ‡å— + å­¦ç”Ÿæ“ä½œè¯´æ˜

## æ•™å­¦äº’åŠ¨é¡¹ç›®è¯¦ç»†è¯´æ˜

### 1. æé—®ä¸å›ç­”
**åŠŸèƒ½æè¿°**ï¼šå¸ˆç”Ÿé—´çš„å®æ—¶é—®ç­”äº’åŠ¨ï¼Œæ”¯æŒå¼€æ”¾æ€§é—®é¢˜å’Œå°é—­æ€§é—®é¢˜ã€‚
**åº”ç”¨åœºæ™¯**ï¼šè¯¾å ‚å¯¼å…¥ã€çŸ¥è¯†ç‚¹è®²è§£ã€è¯¾å ‚æ€»ç»“
**å®ä¾‹**ï¼š
- æ•°å­¦è¯¾ï¼šè€å¸ˆæé—®"åœ†çš„å‘¨é•¿å…¬å¼æ˜¯ä»€ä¹ˆï¼Ÿ"ï¼Œå­¦ç”Ÿå¯ä»¥æ–‡å­—æˆ–è¯­éŸ³å›ç­”
- å†å²è¯¾ï¼šè€å¸ˆé—®"ä½ ä»¬å¯¹ç§¦å§‹çš‡ç»Ÿä¸€å…­å›½æœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿ"ï¼Œå­¦ç”Ÿå‘è¡¨è§‚ç‚¹å¹¶äº’ç›¸è®¨è®º
**æŠ€æœ¯æ¡†æ¶**ï¼šSocket.ioï¼ˆå®æ—¶é€šä¿¡ï¼‰ã€WebRTCï¼ˆè¯­éŸ³ä¼ è¾“ï¼‰ã€React/Vueï¼ˆå‰ç«¯UIï¼‰

### 2. æŠ•ç¥¨ä¸é€‰æ‹©é¢˜
**åŠŸèƒ½æè¿°**ï¼šå¿«é€Ÿæ”¶é›†å­¦ç”Ÿæ„è§å’Œç­”æ¡ˆï¼Œå®æ—¶æ˜¾ç¤ºç»Ÿè®¡ç»“æœã€‚
**åº”ç”¨åœºæ™¯**ï¼šæ¦‚å¿µæµ‹è¯•ã€æ„è§å¾é›†ã€è¯¾å ‚å†³ç­–
**å®ä¾‹**ï¼š
- è‹±è¯­è¯¾ï¼šé€‰æ‹©é¢˜"Which is correct? A) He go to school B) He goes to school"
- ç‰©ç†è¯¾ï¼šæŠ•ç¥¨é€‰æ‹©"å…‰æ˜¯æ³¢è¿˜æ˜¯ç²’å­ï¼Ÿ"ï¼Œå¼•å‡ºæ³¢ç²’äºŒè±¡æ€§è®¨è®º
**æŠ€æœ¯æ¡†æ¶**ï¼šKahoot APIã€Poll.ly SDKã€Chart.jsï¼ˆæ•°æ®å¯è§†åŒ–ï¼‰ã€WebSocket

### 3. ç®€å•é¢˜ä¸è¯äº‘
**åŠŸèƒ½æè¿°**ï¼šå­¦ç”Ÿæäº¤å…³é”®è¯ï¼Œç³»ç»Ÿç”Ÿæˆè¯äº‘å›¾å±•ç¤ºé«˜é¢‘æ¦‚å¿µã€‚
**åº”ç”¨åœºæ™¯**ï¼šæ¦‚å¿µæ€»ç»“ã€å¤´è„‘é£æš´ã€çŸ¥è¯†å›é¡¾
**å®ä¾‹**ï¼š
- åŒ–å­¦è¯¾ï¼šè®©å­¦ç”Ÿè¾“å…¥"åŒ–å­¦ååº”"ç›¸å…³è¯æ±‡ï¼Œç”Ÿæˆè¯äº‘çªå‡º"å‚¬åŒ–å‰‚"ã€"èƒ½é‡"ç­‰é«˜é¢‘è¯
- è¯­æ–‡è¯¾ï¼šè¯—æ­Œèµæåï¼Œå­¦ç”Ÿè¾“å…¥æ„Ÿå—è¯æ±‡ï¼Œå½¢æˆæƒ…æ„Ÿè¯äº‘
**æŠ€æœ¯æ¡†æ¶**ï¼šWordCloud.jsã€D3.jsã€Python-wordcloudã€ECharts

### 4. éšå ‚æµ‹è¯•
**åŠŸèƒ½æè¿°**ï¼šå³æ—¶ç”Ÿæˆå°æµ‹éªŒï¼Œå¿«é€Ÿæ£€éªŒå­¦ä¹ æ•ˆæœã€‚
**åº”ç”¨åœºæ™¯**ï¼šè¯¾ä¸­æ£€æµ‹ã€çŸ¥è¯†å·©å›ºã€å­¦ä¹ è¯„ä¼°
**å®ä¾‹**ï¼š
- ç”Ÿç‰©è¯¾ï¼šDNAç»“æ„å­¦ä¹ åï¼Œ5é“é€‰æ‹©é¢˜æµ‹è¯•ï¼Œç³»ç»Ÿå®æ—¶æ˜¾ç¤ºæ­£ç¡®ç‡
- åœ°ç†è¯¾ï¼šä¸–ç•Œå„å›½é¦–éƒ½å¿«é€Ÿé—®ç­”ï¼Œé™æ—¶å›ç­”å¢åŠ è¶£å‘³æ€§
**æŠ€æœ¯æ¡†æ¶**ï¼šQuizlet APIã€Google Forms APIã€H5P Frameworkã€Moodle Quiz API

### 5. å°ç»„è®¨è®º
**åŠŸèƒ½æè¿°**ï¼šå°†å­¦ç”Ÿåˆ†ç»„è¿›è¡Œä¸»é¢˜è®¨è®ºï¼Œæ”¯æŒåœ¨çº¿åä½œå’Œæˆæœåˆ†äº«ã€‚
**åº”ç”¨åœºæ™¯**ï¼šåˆä½œå­¦ä¹ ã€é—®é¢˜æ¢è®¨ã€è§‚ç‚¹äº¤æµ
**å®ä¾‹**ï¼š
- é“å¾·ä¸æ³•æ²»è¯¾ï¼šåˆ†ç»„è®¨è®º"ç½‘ç»œéšç§ä¿æŠ¤"ï¼Œå„ç»„åˆ†åˆ«ä»ä¸ªäººã€ä¼ä¸šã€æ”¿åºœè§’åº¦åˆ†æ
- ç§‘å­¦è¯¾ï¼šå°ç»„è®¨è®º"å¦‚ä½•å‡å°‘å¡‘æ–™æ±¡æŸ“"ï¼Œåˆ¶å®šè¡ŒåŠ¨è®¡åˆ’å¹¶å±•ç¤º
**æŠ€æœ¯æ¡†æ¶**ï¼šDiscord.jsã€Slack APIã€Microsoft Teams SDKã€BigBlueButton

### 6. å¤´è„‘é£æš´
**åŠŸèƒ½æè¿°**ï¼šå¿«é€Ÿæ”¶é›†å­¦ç”Ÿçš„åˆ›æ„æƒ³æ³•ï¼Œæ— è¯„åˆ¤åœ°å±•ç¤ºæ‰€æœ‰è§‚ç‚¹ã€‚
**åº”ç”¨åœºæ™¯**ï¼šåˆ›æ–°æ€è€ƒã€é—®é¢˜è§£å†³ã€åˆ›æ„æ¿€å‘
**å®ä¾‹**ï¼š
- ç¾æœ¯è¯¾ï¼šä¸ºå­¦æ ¡è®¾è®¡æ–°çš„æ ¡å¾½ï¼Œå­¦ç”Ÿæäº¤å„ç§åˆ›æ„å…ƒç´ å’Œè®¾è®¡ç†å¿µ
- ä¿¡æ¯æŠ€æœ¯è¯¾ï¼šå¤´è„‘é£æš´"æœªæ¥æ™ºèƒ½å®¶å±…åŠŸèƒ½"ï¼Œæ”¶é›†å¤©é©¬è¡Œç©ºçš„åˆ›æ„
**æŠ€æœ¯æ¡†æ¶**ï¼šMiro APIã€Jamboard APIã€Padlet SDKã€MindMeister API

### 7. çŸ­å‘¨æœŸé¡¹ç›®æ¨¡å—
**åŠŸèƒ½æè¿°**ï¼šå°†å¤æ‚é¡¹ç›®åˆ†è§£ä¸ºå¤šä¸ªçŸ­æœŸä»»åŠ¡æ¨¡å—ï¼Œä¾¿äºç®¡ç†å’Œå®Œæˆã€‚
**åº”ç”¨åœºæ™¯**ï¼šé¡¹ç›®å¼å­¦ä¹ ã€æŠ€èƒ½åŸ¹å…»ã€ç»¼åˆå®è·µ
**å®ä¾‹**ï¼š
- è¯­æ–‡è¯¾ï¼šåˆ¶ä½œ"æˆ‘çš„å®¶ä¹¡"æ•°å­—æ•…äº‹ï¼Œåˆ†ä¸ºç´ ææ”¶é›†ã€è„šæœ¬ç¼–å†™ã€å½•åˆ¶åˆ¶ä½œä¸‰ä¸ªæ¨¡å—
- æ•°å­¦è¯¾ï¼šè®¾è®¡å­¦æ ¡å•†åº—ç»è¥æ–¹æ¡ˆï¼Œåˆ†ä¸ºå¸‚åœºè°ƒç ”ã€æˆæœ¬æ ¸ç®—ã€æ–¹æ¡ˆå±•ç¤ºä¸‰ä¸ªé˜¶æ®µ
**æŠ€æœ¯æ¡†æ¶**ï¼šTrello APIã€Asana SDKã€Monday.com APIã€Notion API

### 8. åŸºç¡€æ¨¡æ‹Ÿå®éªŒ
**åŠŸèƒ½æè¿°**ï¼šé€šè¿‡ç®€åŒ–çš„è™šæ‹Ÿå®éªŒç¯å¢ƒï¼Œè®©å­¦ç”Ÿä½“éªŒå®éªŒè¿‡ç¨‹ã€‚
**åº”ç”¨åœºæ™¯**ï¼šç§‘å­¦æ¢ç©¶ã€å®éªŒæ•™å­¦ã€å®‰å…¨æ¼”ç»ƒ
**å®ä¾‹**ï¼š
- åŒ–å­¦è¯¾ï¼šè™šæ‹Ÿé…¸ç¢±ä¸­å’Œååº”å®éªŒï¼Œè°ƒæ•´è¯•å‰‚æµ“åº¦è§‚å¯ŸpHå˜åŒ–
- ç‰©ç†è¯¾ï¼šæ¨¡æ‹Ÿå•æ‘†è¿åŠ¨å®éªŒï¼Œæ”¹å˜æ‘†é•¿å’Œé‡é‡è§‚å¯Ÿå‘¨æœŸå˜åŒ–
**æŠ€æœ¯æ¡†æ¶**ï¼šPhET Simulationsã€LabXchangeã€ChemSketchã€Three.jsï¼ˆè‡ªå®šä¹‰ä»¿çœŸï¼‰

### 9. ç¼–ç¨‹ä¸ä»£ç è¿è¡Œ
**åŠŸèƒ½æè¿°**ï¼šæä¾›åœ¨çº¿ç¼–ç¨‹ç¯å¢ƒï¼Œå­¦ç”Ÿå¯ä»¥ç¼–å†™å’Œè¿è¡Œä»£ç ã€‚
**åº”ç”¨åœºæ™¯**ï¼šè®¡ç®—æœºè¯¾ç¨‹ã€é€»è¾‘æ€ç»´è®­ç»ƒã€é—®é¢˜è§£å†³
**å®ä¾‹**ï¼š
- ä¿¡æ¯æŠ€æœ¯è¯¾ï¼šç”¨Scratchåˆ¶ä½œç®€å•åŠ¨ç”»ï¼Œå­¦ä¹ å¾ªç¯å’Œæ¡ä»¶è¯­å¥
- æ•°å­¦è¯¾ï¼šç”¨Pythonç”»å‡ ä½•å›¾å½¢ï¼Œç†è§£åæ ‡ç³»å’Œå‡½æ•°æ¦‚å¿µ
**æŠ€æœ¯æ¡†æ¶**ï¼šCodePen APIã€Repl.it SDKã€CodeSandbox APIã€Jupyter Notebooks

### 10. æ¸¸æˆåŒ–å­¦ä¹ å¾½ç« 
**åŠŸèƒ½æè¿°**ï¼šè®¾ç½®å­¦ä¹ æˆå°±å¾½ç« ç³»ç»Ÿï¼Œæ¿€åŠ±å­¦ç”ŸæŒç»­å­¦ä¹ ã€‚
**åº”ç”¨åœºæ™¯**ï¼šå­¦ä¹ æ¿€åŠ±ã€è¿›åº¦è¿½è¸ªã€èƒ½åŠ›è®¤è¯
**å®ä¾‹**ï¼š
- è‹±è¯­è¯¾ï¼šè®¾ç½®"è¯æ±‡è¾¾äºº"ã€"è¯­æ³•ä¸“å®¶"ã€"å£è¯­æµåˆ©"ç­‰å¾½ç« 
- æ•°å­¦è¯¾ï¼šè§£é¢˜é€Ÿåº¦ã€æ­£ç¡®ç‡ã€åˆ›æ–°è§£æ³•åˆ†åˆ«å¯¹åº”ä¸åŒå¾½ç« ç­‰çº§
**æŠ€æœ¯æ¡†æ¶**ï¼šClassBadgesã€Mozilla Open Badgesã€Credly APIã€Badgr API

### 11. å­¦ç”Ÿå±•ç¤ºä¸äº’è¯„
**åŠŸèƒ½æè¿°**ï¼šå­¦ç”Ÿå±•ç¤ºå­¦ä¹ æˆæœï¼ŒåŒä¼´ä¹‹é—´è¿›è¡Œè¯„ä»·å’Œåé¦ˆã€‚
**åº”ç”¨åœºæ™¯**ï¼šæˆæœå±•ç¤ºã€åŒä¼´å­¦ä¹ ã€èƒ½åŠ›åŸ¹å…»
**å®ä¾‹**ï¼š
- ç§‘å­¦è¯¾ï¼šå­¦ç”Ÿåˆ¶ä½œç¯ä¿å°å‘æ˜è§†é¢‘ï¼Œå…¶ä»–åŒå­¦ä»åˆ›æ–°æ€§ã€å®ç”¨æ€§ã€è¡¨è¾¾æ¸…æ™°åº¦è¯„åˆ†
- æ–‡å­¦è¯¾ï¼šè¯—æ­Œæœ—è¯µå±•ç¤ºï¼ŒåŒå­¦ä»¬æŠ•ç¥¨é€‰å‡º"æœ€ä½³æƒ…æ„Ÿè¡¨è¾¾å¥–"
**æŠ€æœ¯æ¡†æ¶**ï¼šFlipgrid APIã€Seesaw SDKã€ClassDojo APIã€Padlet SDK

### 12. è™šæ‹Ÿç”»å»Šæ¼«æ­¥
**åŠŸèƒ½æè¿°**ï¼šåˆ›å»ºè™šæ‹Ÿå±•ç¤ºç©ºé—´ï¼Œå­¦ç”Ÿå¯ä»¥åœ¨çº¿"å‚è§‚"å­¦ä¹ æˆæœã€‚
**åº”ç”¨åœºæ™¯**ï¼šä½œå“å±•ç¤ºã€æ–‡åŒ–å­¦ä¹ ã€è‰ºæœ¯æ¬£èµ
**å®ä¾‹**ï¼š
- å†å²è¯¾ï¼šåˆ›å»º"å¤ä»£æ–‡æ˜è™šæ‹Ÿåšç‰©é¦†"ï¼Œå­¦ç”Ÿåˆ¶ä½œæ–‡ç‰©ä»‹ç»å¹¶åœ¨è™šæ‹Ÿç©ºé—´å±•ç¤º
- ç¾æœ¯è¯¾ï¼šä¸¾åŠ"å­¦ç”Ÿæ•°å­—ç”»å±•"ï¼Œè§‚ä¼—å¯ä»¥ç‚¹å‡»ä½œå“æŸ¥çœ‹åˆ›ä½œè¿‡ç¨‹å’Œç†å¿µ
**æŠ€æœ¯æ¡†æ¶**ï¼šA-Frameï¼ˆVRç½‘ç«™ï¼‰ã€Mozilla Hubsã€Spatial.io APIã€æ— ç°æˆæŠ€æœ¯æ¡†æ¶ï¼ˆå¤æ‚è™šæ‹Ÿç©ºé—´ï¼‰

## æ•™å­¦å¤šæ¨¡æ€å†…å®¹è¯¦ç»†è¯´æ˜

### 1. HTMLäº’åŠ¨æ¸¸æˆ
**åŠŸèƒ½æè¿°**ï¼šåŸºäºWebæŠ€æœ¯åˆ›å»ºçš„äº¤äº’å¼æ•™å­¦æ¸¸æˆï¼Œæ”¯æŒç‚¹å‡»ã€æ‹–æ‹½ã€è¾“å…¥ç­‰å¤šç§äº¤äº’æ–¹å¼ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šè·¨å¹³å°å…¼å®¹ã€å®æ—¶åé¦ˆã€æ•°æ®è¿½è¸ªã€å¯å®šåˆ¶åŒ–
**åº”ç”¨åœºæ™¯**ï¼šçŸ¥è¯†å·©å›ºã€æŠ€èƒ½è®­ç»ƒã€è¶£å‘³å­¦ä¹ 
**å®ä¾‹**ï¼š
- æ•°å­¦è¯¾ï¼šåˆ¶ä½œ"æ•°å­—é…å¯¹"æ¸¸æˆï¼Œå­¦ç”Ÿæ‹–æ‹½æ•°å­—ä¸å¯¹åº”çš„å›¾å½¢åŒ¹é…ï¼Œå­¦ä¹ æ•°çš„æ¦‚å¿µ
- è‹±è¯­è¯¾ï¼šå¼€å‘"å•è¯æ‹¼å†™å†’é™©"ï¼Œå­¦ç”Ÿåœ¨è™šæ‹Ÿåœºæ™¯ä¸­æ”¶é›†å­—æ¯ç»„æˆå•è¯ï¼Œé€šå…³è·å¾—å¥–åŠ±
**æŠ€æœ¯æ¡†æ¶**ï¼šPhaser.jsã€Unity WebGLã€Construct 3ã€GameMaker Studio

### 2. AIç”Ÿæˆè§†é¢‘
**åŠŸèƒ½æè¿°**ï¼šåˆ©ç”¨AIæŠ€æœ¯è‡ªåŠ¨ç”Ÿæˆæ•™å­¦è§†é¢‘å†…å®¹ï¼ŒåŒ…æ‹¬è§£è¯´ã€åŠ¨ç”»ã€å­—å¹•ç­‰å…ƒç´ ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šå¿«é€Ÿç”Ÿæˆã€ä¸ªæ€§åŒ–å†…å®¹ã€å¤šè¯­è¨€æ”¯æŒã€è‡ªåŠ¨é…éŸ³
**åº”ç”¨åœºæ™¯**ï¼šæ¦‚å¿µè®²è§£ã€è¿‡ç¨‹æ¼”ç¤ºã€æƒ…æ™¯æ¨¡æ‹Ÿ
**å®ä¾‹**ï¼š
- å†å²è¯¾ï¼šAIç”Ÿæˆ"ä¸ç»¸ä¹‹è·¯è´¸æ˜“"åŠ¨ç”»è§†é¢‘ï¼Œå±•ç¤ºå•†é˜Ÿè¡Œè¿›è·¯çº¿å’Œæ–‡åŒ–äº¤æµè¿‡ç¨‹
- ç‰©ç†è¯¾ï¼šè‡ªåŠ¨åˆ›å»º"å…‰çš„æŠ˜å°„å®éªŒ"æ¼”ç¤ºè§†é¢‘ï¼Œå¯è°ƒèŠ‚å…¥å°„è§’åº¦è§‚å¯Ÿä¸åŒæŠ˜å°„æ•ˆæœ
**æŠ€æœ¯æ¡†æ¶**ï¼šRunway MLã€Synthesiaã€D-IDã€æ— ç°æˆæŠ€æœ¯æ¡†æ¶ï¼ˆå®šåˆ¶æ•™å­¦è§†é¢‘ç”Ÿæˆï¼‰

### 3. AIç”Ÿæˆå›¾ç‰‡
**åŠŸèƒ½æè¿°**ï¼šæ ¹æ®æ•™å­¦å†…å®¹è‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„å›¾åƒã€æ’ç”»ã€å›¾è¡¨ç­‰è§†è§‰ç´ æã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šé«˜è´¨é‡è¾“å‡ºã€é£æ ¼å¯æ§ã€æ‰¹é‡ç”Ÿæˆã€ç‰ˆæƒå‹å¥½
**åº”ç”¨åœºæ™¯**ï¼šæ¦‚å¿µè§£é‡Šã€åœºæ™¯æè¿°ã€æ•°æ®å¯è§†åŒ–
**å®ä¾‹**ï¼š
- ç”Ÿç‰©è¯¾ï¼šç”Ÿæˆå„ç§ç»†èƒç»“æ„çš„é«˜æ¸…ç¤ºæ„å›¾ï¼Œæ ‡æ³¨ç»†èƒå£ã€ç»†èƒæ ¸ã€çº¿ç²’ä½“ç­‰ç»„ç»‡
- åœ°ç†è¯¾ï¼šåˆ›å»ºä¸åŒæ°”å€™å¸¦çš„æ™¯è§‚å›¾ç‰‡ï¼Œç›´è§‚å±•ç¤ºçƒ­å¸¦é›¨æ—ã€æ¸©å¸¦è‰åŸã€æåœ°å†°å·
**æŠ€æœ¯æ¡†æ¶**ï¼šMidjourney APIã€DALL-E 2 APIã€Stable Diffusionã€Adobe Firefly

### 4. AIç”Ÿæˆä»£ç 
**åŠŸèƒ½æè¿°**ï¼šè‡ªåŠ¨ç”Ÿæˆæ•™å­¦ç”¨çš„ç¨‹åºä»£ç ç¤ºä¾‹ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¤æ‚åº¦çº§åˆ«ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šè¯­æ³•æ­£ç¡®ã€æ³¨é‡Šå®Œæ•´ã€å¯è¿è¡ŒéªŒè¯ã€éš¾åº¦åˆ†å±‚
**åº”ç”¨åœºæ™¯**ï¼šç¼–ç¨‹æ•™å­¦ã€ç®—æ³•æ¼”ç¤ºã€é¡¹ç›®å¼€å‘
**å®ä¾‹**ï¼š
- ä¿¡æ¯æŠ€æœ¯è¯¾ï¼šç”ŸæˆPythonç»˜åˆ¶å‡ ä½•å›¾å½¢ä»£ç ï¼Œå­¦ç”Ÿè¿è¡Œåå¯çœ‹åˆ°ä¸‰è§’å½¢ã€åœ†å½¢ç­‰å›¾æ¡ˆ
- æ•°å­¦è¯¾ï¼šåˆ›å»ºè®¡ç®—å™¨ç¨‹åºä»£ç ï¼Œæ¼”ç¤ºå››åˆ™è¿ç®—é€»è¾‘å’Œç”¨æˆ·ç•Œé¢è®¾è®¡
**æŠ€æœ¯æ¡†æ¶**ï¼šGitHub Copilot APIã€OpenAI Codexã€CodeT5ã€Replit Ghostwriter

### 5. AIè¯­éŸ³åˆæˆ
**åŠŸèƒ½æè¿°**ï¼šå°†æ–‡æœ¬å†…å®¹è½¬æ¢ä¸ºè‡ªç„¶æµç•…çš„è¯­éŸ³ï¼Œæ”¯æŒå¤šç§éŸ³è‰²ã€è¯­è¨€å’Œæƒ…æ„Ÿè¡¨è¾¾ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šå¤šè¯­è¨€æ”¯æŒã€æƒ…æ„Ÿè°ƒèŠ‚ã€è¯­é€Ÿæ§åˆ¶ã€éŸ³è‰²é€‰æ‹©
**åº”ç”¨åœºæ™¯**ï¼šå¬åŠ›è®­ç»ƒã€æœ—è¯»ç¤ºèŒƒã€å¤šè¯­è¨€å­¦ä¹ 
**å®ä¾‹**ï¼š
- è¯­æ–‡è¯¾ï¼šAIæœ—è¯»å¤è¯—è¯ï¼Œå¯é€‰æ‹©ä¸åŒçš„éŸ³è‰²å’Œæƒ…æ„Ÿï¼Œå¸®åŠ©å­¦ç”Ÿç†è§£è¯—æ­Œæ„å¢ƒ
- è‹±è¯­è¯¾ï¼šç”Ÿæˆæ ‡å‡†å‘éŸ³çš„å¯¹è¯ç»ƒä¹ ï¼Œå­¦ç”Ÿå¯ä»¥è·Ÿè¯»å¹¶è·å¾—å‘éŸ³è¯„åˆ†åé¦ˆ
**æŠ€æœ¯æ¡†æ¶**ï¼šElevenLabsã€Microsoft Azure Speechã€Google Cloud Text-to-Speechã€Amazon Polly

### 6. 3Dæ¨¡å‹å¯è§†åŒ–
**åŠŸèƒ½æè¿°**ï¼šåˆ›å»ºä¸‰ç»´ç«‹ä½“æ¨¡å‹ï¼Œå­¦ç”Ÿå¯ä»¥360åº¦æ—‹è½¬æŸ¥çœ‹ï¼Œç†è§£å¤æ‚çš„ç©ºé—´ç»“æ„ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šç«‹ä½“å±•ç¤ºã€äº¤äº’æ“ä½œã€ç»†èŠ‚æ”¾å¤§ã€åŠ¨ç”»æ¼”ç¤º
**åº”ç”¨åœºæ™¯**ï¼šç©ºé—´è®¤çŸ¥ã€ç»“æ„åˆ†æã€ç«‹ä½“å‡ ä½•
**å®ä¾‹**ï¼š
- åŒ–å­¦è¯¾ï¼šåˆ¶ä½œåˆ†å­ç»“æ„3Dæ¨¡å‹ï¼Œå­¦ç”Ÿå¯ä»¥æ—‹è½¬è§‚å¯ŸåŸå­é—´çš„é”®åˆå…³ç³»å’Œç©ºé—´æ’åˆ—
- åœ°ç†è¯¾ï¼šåˆ›å»ºåœ°çƒå†…éƒ¨ç»“æ„æ¨¡å‹ï¼Œå‰–é¢å±•ç¤ºåœ°å£³ã€åœ°å¹”ã€åœ°æ ¸çš„å±‚æ¬¡åˆ†å¸ƒ
**æŠ€æœ¯æ¡†æ¶**ï¼šThree.jsã€Blenderï¼ˆå¯¼å‡ºç½‘é¡µï¼‰ã€A-Frameã€Sketchfab API

### 7. æ™ºèƒ½é—®ç­”åŠ©æ‰‹
**åŠŸèƒ½æè¿°**ï¼šAIé©±åŠ¨çš„è™šæ‹ŸåŠ©æ•™ï¼Œèƒ½å¤Ÿå›ç­”å­¦ç”Ÿé—®é¢˜ã€æä¾›å­¦ä¹ æŒ‡å¯¼å’Œä¸ªæ€§åŒ–å»ºè®®ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šè‡ªç„¶è¯­è¨€ç†è§£ã€çŸ¥è¯†åº“æ£€ç´¢ã€ä¸ªæ€§åŒ–å›å¤ã€å­¦ä¹ è·Ÿè¸ª
**åº”ç”¨åœºæ™¯**ï¼šç­”ç–‘è§£æƒ‘ã€å­¦ä¹ æŒ‡å¯¼ã€ä½œä¸šè¾…åŠ©
**å®ä¾‹**ï¼š
- æ•°å­¦è¯¾ï¼šå­¦ç”Ÿé—®"ä¸ºä»€ä¹ˆè¦å­¦ä¸‰è§’å‡½æ•°ï¼Ÿ"ï¼ŒAIåŠ©æ‰‹ç»“åˆå®é™…åº”ç”¨åœºæ™¯è§£é‡Šå…¶é‡è¦æ€§
- ç§‘å­¦è¯¾ï¼šå½“å­¦ç”Ÿå¯¹å®éªŒç»“æœå›°æƒ‘æ—¶ï¼ŒAIåŠ©æ‰‹å¼•å¯¼å­¦ç”Ÿåˆ†æå¯èƒ½çš„å½±å“å› ç´ 
**æŠ€æœ¯æ¡†æ¶**ï¼šOpenAI GPT APIã€Anthropic Claude APIã€Google Dialogflowã€Microsoft Bot Framework

### 8. å¤šè¯­è¨€ç¿»è¯‘
**åŠŸèƒ½æè¿°**ï¼šå®æ—¶ç¿»è¯‘æ•™å­¦å†…å®¹ä¸ºä¸åŒè¯­è¨€ï¼Œæ”¯æŒæ–‡æœ¬ã€è¯­éŸ³ã€å›¾ç‰‡ä¸­çš„æ–‡å­—ç¿»è¯‘ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šå¤šè¯­è¨€æ”¯æŒã€å®æ—¶ç¿»è¯‘ã€ä¸Šä¸‹æ–‡ç†è§£ã€ä¸“ä¸šæœ¯è¯­è¯†åˆ«
**åº”ç”¨åœºæ™¯**ï¼šå›½é™…åŒ–æ•™å­¦ã€è¯­è¨€å­¦ä¹ ã€æ–‡åŒ–äº¤æµ
**å®ä¾‹**ï¼š
- è‹±è¯­è¯¾ï¼šä¸­è‹±å¯¹ç…§é˜…è¯»ææ–™ï¼Œå­¦ç”Ÿå¯ä»¥ç‚¹å‡»ä»»æ„è¯æ±‡æŸ¥çœ‹é‡Šä¹‰å’Œå‘éŸ³
- å†å²è¯¾ï¼šå°†å¤ä»£æ–‡çŒ®è‡ªåŠ¨ç¿»è¯‘æˆç°ä»£è¯­è¨€ï¼Œå¸®åŠ©å­¦ç”Ÿç†è§£å†å²æ–‡çŒ®å†…å®¹
**æŠ€æœ¯æ¡†æ¶**ï¼šGoogle Translate APIã€Microsoft Translatorã€DeepL APIã€Baidu Translate API

### 9. ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
**åŠŸèƒ½æè¿°**ï¼šåŸºäºå­¦ç”Ÿå­¦ä¹ æ•°æ®å’Œèƒ½åŠ›è¯„ä¼°ï¼ŒåŠ¨æ€è°ƒæ•´å­¦ä¹ å†…å®¹å’Œè¿›åº¦å®‰æ’ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šæ•°æ®é©±åŠ¨ã€è‡ªé€‚åº”è°ƒæ•´ã€èƒ½åŠ›è¯„ä¼°ã€è¿›åº¦è¿½è¸ª
**åº”ç”¨åœºæ™¯**ï¼šå› ææ–½æ•™ã€è¡¥å¼±æä¼˜ã€å­¦ä¹ è§„åˆ’
**å®ä¾‹**ï¼š
- æ•°å­¦è¯¾ï¼šæ ¹æ®å­¦ç”Ÿåœ¨å‡ ä½•é¢˜ç›®ä¸Šçš„è¡¨ç°ï¼Œç³»ç»Ÿæ¨èé¢å¤–çš„ç©ºé—´æƒ³è±¡åŠ›è®­ç»ƒå†…å®¹
- è‹±è¯­è¯¾ï¼šåˆ†æå­¦ç”Ÿè¯­æ³•é”™è¯¯ç±»å‹ï¼Œå®šåˆ¶é’ˆå¯¹æ€§çš„è¯­æ³•ç»ƒä¹ å’Œè®²è§£å†…å®¹
**æŠ€æœ¯æ¡†æ¶**ï¼šAdaptive Learning Platformsï¼ˆKnewtonã€Smart Sparrowï¼‰ã€æ— ç°æˆæŠ€æœ¯æ¡†æ¶ï¼ˆå®šåˆ¶å­¦ä¹ è·¯å¾„ï¼‰

### 10. è‡ªé€‚åº”é¢˜åº“
**åŠŸèƒ½æè¿°**ï¼šæ™ºèƒ½é¢˜åº“ç³»ç»Ÿæ ¹æ®å­¦ç”Ÿç­”é¢˜æƒ…å†µåŠ¨æ€è°ƒæ•´é¢˜ç›®éš¾åº¦å’Œç±»å‹ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šéš¾åº¦è‡ªé€‚åº”ã€çŸ¥è¯†ç‚¹è¦†ç›–ã€é”™è¯¯åˆ†æã€æ™ºèƒ½æ¨è
**åº”ç”¨åœºæ™¯**ï¼šç»ƒä¹ æµ‹è¯•ã€èƒ½åŠ›è¯„ä¼°ã€æŸ¥ç¼ºè¡¥æ¼
**å®ä¾‹**ï¼š
- ç‰©ç†è¯¾ï¼šå­¦ç”Ÿåœ¨åŠ›å­¦é¢˜ç›®ä¸­é”™è¯¯ç‡é«˜æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨æ¨é€ç›¸å…³åŸºç¡€æ¦‚å¿µé¢˜å’Œåº”ç”¨é¢˜
- åŒ–å­¦è¯¾ï¼šæ ¹æ®å­¦ç”Ÿå¯¹ä¸åŒååº”ç±»å‹çš„æŒæ¡ç¨‹åº¦ï¼Œæ™ºèƒ½åŒ¹é…å¯¹åº”éš¾åº¦çš„åŒ–å­¦æ–¹ç¨‹å¼é¢˜ç›®
**æŠ€æœ¯æ¡†æ¶**ï¼šCATï¼ˆComputer Adaptive Testingï¼‰ç³»ç»Ÿã€Khan Academy APIã€æ— ç°æˆæŠ€æœ¯æ¡†æ¶ï¼ˆå­¦ç§‘é€‚åº”æ€§é¢˜åº“ï¼‰

### 11. AIéŸ³é¢‘ç”Ÿæˆ
**åŠŸèƒ½æè¿°**ï¼šåˆ©ç”¨AIæŠ€æœ¯ç”Ÿæˆå„ç§ç±»å‹çš„æ•™å­¦éŸ³é¢‘å†…å®¹ï¼ŒåŒ…æ‹¬èƒŒæ™¯éŸ³ä¹ã€ç¯å¢ƒéŸ³æ•ˆã€æ•™å­¦æ—ç™½ç­‰ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šé£æ ¼å¤šæ ·ã€æƒ…æ„Ÿè¡¨è¾¾ã€æ— ç‰ˆæƒé£é™©ã€å¯å®šåˆ¶åŒ–
**åº”ç”¨åœºæ™¯**ï¼šæ°›å›´è¥é€ ã€å¬åŠ›è®­ç»ƒã€å¤šæ„Ÿå®˜å­¦ä¹ 
**å®ä¾‹**ï¼š
- å†å²è¯¾ï¼šç”Ÿæˆå¤å…¸éŸ³ä¹é£æ ¼çš„èƒŒæ™¯éŸ³ï¼Œè¥é€ å†å²æ°›å›´ï¼Œé…åˆæœä»£å­¦ä¹ 
- è‹±è¯­è¯¾ï¼šç”Ÿæˆä¸åŒå£éŸ³çš„å¯¹è¯éŸ³é¢‘ï¼Œè®©å­¦ç”Ÿæ¥è§¦å¤šå…ƒåŒ–çš„è¯­éŸ³ç¯å¢ƒ
**æŠ€æœ¯æ¡†æ¶**ï¼šSuno AIã€AIVAã€Mubert APIã€udio.ai

### 12. è„‘å›¾ç”Ÿæˆ
**åŠŸèƒ½æè¿°**ï¼šæ™ºèƒ½åˆ†ææ•™å­¦å†…å®¹ï¼Œè‡ªåŠ¨ç”Ÿæˆç»“æ„åŒ–çš„æ€ç»´å¯¼å›¾å’ŒçŸ¥è¯†è„‘å›¾ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šå±‚çº§ç»“æ„ã€å…³è”å±•ç¤ºã€å¯è§†åŒ–æ€ç»´ã€äº¤äº’ç¼–è¾‘
**åº”ç”¨åœºæ™¯**ï¼šçŸ¥è¯†æ¢³ç†ã€æ¦‚å¿µå…³è”ã€å¤ä¹ æ€»ç»“
**å®ä¾‹**ï¼š
- ç”Ÿç‰©è¯¾ï¼šç”Ÿæˆ"ç»†èƒç»“æ„"è„‘å›¾ï¼Œå±•ç¤ºå„ç»„æˆéƒ¨åˆ†åŠå…¶åŠŸèƒ½å…³ç³»
- æ–‡å­¦è¯¾ï¼šåˆ›å»º"è¯—æ­Œè¦ç´ "æ€ç»´å¯¼å›¾ï¼Œä¸²è”éŸµå¾‹ã€æ„è±¡ã€æƒ…æ„Ÿç­‰è¦ç´ 
**æŠ€æœ¯æ¡†æ¶**ï¼šXMind SDKã€MindMeister APIã€Lucidchart APIã€ProcessOn API

### 13. æµç¨‹å›¾ç”Ÿæˆ
**åŠŸèƒ½æè¿°**ï¼šæ ¹æ®æ•™å­¦å†…å®¹è‡ªåŠ¨åˆ›å»ºå„ç§ç±»å‹çš„æµç¨‹å›¾ï¼Œå±•ç¤ºè¿‡ç¨‹ã€æ­¥éª¤å’Œé€»è¾‘å…³ç³»ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šè‡ªåŠ¨å¸ƒå±€ã€é€»è¾‘æ¸…æ™°ã€æ­¥éª¤å¯è§†ã€äº¤äº’æ“ä½œ
**åº”ç”¨åœºæ™¯**ï¼šè¿‡ç¨‹æ•™å­¦ã€é€»è¾‘åˆ†æã€æ­¥éª¤æŒ‡å¯¼
**å®ä¾‹**ï¼š
- åŒ–å­¦è¯¾ï¼šç”Ÿæˆ"åŒ–å­¦å®éªŒæµç¨‹å›¾"ï¼Œè¯¦ç»†å±•ç¤ºå®éªŒæ­¥éª¤å’Œæ³¨æ„äº‹é¡¹
- æ•°å­¦è¯¾ï¼šåˆ›å»º"è§£é¢˜æ€è·¯æµç¨‹å›¾"ï¼Œå¼•å¯¼å­¦ç”ŸæŒæ¡è§£é¢˜æ–¹æ³•å’Œé€»è¾‘
**æŠ€æœ¯æ¡†æ¶**ï¼šDraw.io APIã€Lucidchartã€Visio Onlineã€Mermaid.js

### 14. ç§‘å­¦è®¡ç®—å™¨ä¸å…¬å¼ç”Ÿæˆ
**åŠŸèƒ½æè¿°**ï¼šæ™ºèƒ½ç”Ÿæˆä¸“ä¸šçš„ç§‘å­¦è®¡ç®—å™¨ç•Œé¢å’Œæ•°ç†åŒ–å…¬å¼æ¸²æŸ“ï¼Œæ”¯æŒå¤æ‚æ•°å­¦è¿ç®—ã€å…¬å¼æ¨å¯¼ã€æ–¹ç¨‹æ±‚è§£å’Œå‡½æ•°å›¾åƒç»˜åˆ¶ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šé«˜ç²¾åº¦è®¡ç®—ã€LaTeXå…¬å¼æ¸²æŸ“ã€å›¾å½¢åŒ–æ˜¾ç¤ºã€æ­¥éª¤å±•ç¤ºã€å…¬å¼æ¨å¯¼
**åº”ç”¨åœºæ™¯**ï¼šæ•°å­¦è®¡ç®—ã€ç‰©ç†å»ºæ¨¡ã€åŒ–å­¦ååº”ã€å·¥ç¨‹åº”ç”¨ã€å…¬å¼æ•™å­¦
**å®ä¾‹**ï¼š
- æ•°å­¦è¯¾ï¼šç”Ÿæˆ"äºŒæ¬¡æ–¹ç¨‹æ±‚è§£å™¨"ï¼Œæ˜¾ç¤ºå®Œæ•´çš„æ±‚æ ¹å…¬å¼å’Œå›¾åƒï¼Œå±•ç¤ºåˆ¤åˆ«å¼è®¡ç®—è¿‡ç¨‹
- ç‰©ç†è¯¾ï¼šåˆ›å»º"ç‰›é¡¿è¿åŠ¨å®šå¾‹è®¡ç®—å™¨"ï¼Œé›†æˆF=maç­‰å…¬å¼ï¼Œè‡ªåŠ¨å•ä½è½¬æ¢å’ŒçŸ¢é‡è®¡ç®—
- åŒ–å­¦è¯¾ï¼šç”Ÿæˆ"åŒ–å­¦æ–¹ç¨‹å¼é…å¹³å™¨"ï¼Œè‡ªåŠ¨é…å¹³ååº”æ–¹ç¨‹å¹¶è®¡ç®—æ‘©å°”æ¯”ä¾‹
**æŠ€æœ¯æ¡†æ¶**ï¼šMath.jsã€MathJaxã€KaTeXã€D3.jsã€Desmos APIã€GeoGebra APIã€ChemDoodle

### 15. æƒ…å¢ƒåŒ–æ¡ˆä¾‹
**åŠŸèƒ½æè¿°**ï¼šåŸºäºçœŸå®åœºæ™¯åˆ›å»ºè´´è¿‘å­¦ç”Ÿç”Ÿæ´»çš„æ•™å­¦æ¡ˆä¾‹ï¼Œæé«˜å­¦ä¹ çš„ç›¸å…³æ€§å’Œè¶£å‘³æ€§ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šç”Ÿæ´»åŒ–åœºæ™¯ã€é—®é¢˜é©±åŠ¨ã€è·¨å­¦ç§‘æ•´åˆã€å®è·µåº”ç”¨
**åº”ç”¨åœºæ™¯**ï¼šæ¡ˆä¾‹æ•™å­¦ã€é—®é¢˜è§£å†³ã€åº”ç”¨å®è·µ
**å®ä¾‹**ï¼š
- æ•°å­¦è¯¾ï¼šä»¥"æ ¡å›­å•†åº—ç»è¥"ä¸ºèƒŒæ™¯ï¼Œå­¦ä¹ åˆ©æ¶¦è®¡ç®—ã€å›¾è¡¨åˆ†æç­‰æ•°å­¦æ¦‚å¿µ
- ç¯å¢ƒç§‘å­¦è¯¾ï¼šæ¨¡æ‹Ÿ"ç¤¾åŒºåƒåœ¾åˆ†ç±»æ¨å¹¿"é¡¹ç›®ï¼Œå­¦ä¹ ç¯ä¿çŸ¥è¯†å’Œç¤¾ä¼šå®è·µæŠ€èƒ½
**æŠ€æœ¯æ¡†æ¶**ï¼šæ— ç°æˆæŠ€æœ¯æ¡†æ¶ï¼ˆå®šåˆ¶æƒ…å¢ƒåŒ–æ•™å­¦å¹³å°ï¼‰

## å¤§å­¦æ•™å­¦ç‰¹è‰²åŠŸèƒ½è¡¥å……

### é’ˆå¯¹å¤§å­¦æ•™å­¦çš„äº’åŠ¨é¡¹ç›®è¡¥å……

#### 1. å­¦æœ¯è®¨è®ºä¸è¾©è®º
**åŠŸèƒ½æè¿°**ï¼šç»“æ„åŒ–çš„å­¦æœ¯äº‰è®ºå’Œæ·±åº¦è®¨è®ºå¹³å°ï¼Œæ”¯æŒæ‰¹åˆ¤æ€§æ€ç»´åŸ¹å…»ã€‚
**åº”ç”¨åœºæ™¯**ï¼šå­¦æœ¯äº‰è¾©ã€è§‚ç‚¹ç¢°æ’ã€ç†è®ºæ¢è®¨
**å®ä¾‹**ï¼š
- æ³•å­¦è¯¾ï¼šæ¨¡æ‹Ÿæ³•åº­è¾©è®ºï¼Œå­¦ç”Ÿåˆ†åˆ«æ‹…ä»»åŸå‘Šã€è¢«å‘Šå¾‹å¸ˆï¼ŒåŸºäºçœŸå®æ¡ˆä¾‹è¿›è¡Œè®ºè¾©
- å“²å­¦è¯¾ï¼šè‹æ ¼æ‹‰åº•å¼å¯¹è¯ï¼Œå›´ç»•"äººå·¥æ™ºèƒ½æ˜¯å¦å…·æœ‰é“å¾·è´£ä»»"å±•å¼€æ€è¾¨è®¨è®º
**æŠ€æœ¯æ¡†æ¶**ï¼šKialoï¼ˆè¾©è®ºå¹³å°ï¼‰ã€Discourse Forumã€æ— ç°æˆæŠ€æœ¯æ¡†æ¶ï¼ˆç»“æ„åŒ–å­¦æœ¯è¾©è®ºï¼‰

#### 2. ç ”ç©¶é¡¹ç›®åä½œ
**åŠŸèƒ½æè¿°**ï¼šæ”¯æŒé•¿æœŸç ”ç©¶é¡¹ç›®çš„åä½œç®¡ç†ã€è¿›åº¦è·Ÿè¸ªå’Œæˆæœå±•ç¤ºã€‚
**åº”ç”¨åœºæ™¯**ï¼šå­¦æœ¯ç ”ç©¶ã€å›¢é˜Ÿåä½œã€é¡¹ç›®ç®¡ç†
**å®ä¾‹**ï¼š
- å¿ƒç†å­¦è¯¾ï¼šå°ç»„è¿›è¡Œ"ç¤¾äº¤åª’ä½“å¯¹å¤§å­¦ç”Ÿå¿ƒç†å¥åº·å½±å“"çš„å®è¯ç ”ç©¶é¡¹ç›®
- å·¥ç¨‹è¯¾ï¼šè·¨ä¸“ä¸šå›¢é˜Ÿè®¾è®¡æ™ºèƒ½æ ¡å›­ç³»ç»Ÿï¼Œæ¶‰åŠç¡¬ä»¶ã€è½¯ä»¶ã€ç”¨æˆ·ä½“éªŒç­‰é¢†åŸŸ
**æŠ€æœ¯æ¡†æ¶**ï¼šGitHub Projectsã€GitLab Issuesã€Zenhub APIã€Linear API

#### 3. æ¡ˆä¾‹åˆ†æå·¥åŠ
**åŠŸèƒ½æè¿°**ï¼šåŸºäºçœŸå®å¤æ‚æ¡ˆä¾‹çš„æ·±åº¦åˆ†æå’Œè§£å†³æ–¹æ¡ˆè®¾è®¡å¹³å°ã€‚
**åº”ç”¨åœºæ™¯**ï¼šç†è®ºåº”ç”¨ã€å¤šç»´åˆ†æã€åˆ›æ–°æ€ç»´
**å®ä¾‹**ï¼š
- å•†å­¦é™¢ï¼šåˆ†æNetflixçš„å•†ä¸šæ¨¡å¼è½¬å‹ï¼Œä»DVDç§Ÿèµåˆ°æµåª’ä½“å·¨å¤´çš„æˆ˜ç•¥æ¼”è¿›
- åŒ»å­¦é™¢ï¼šç–‘éš¾ç—…ä¾‹ä¼šè¯Šï¼Œå­¦ç”Ÿæå‡ºè¯Šæ–­å‡è®¾å’Œä¸ªæ€§åŒ–æ²»ç–—æ–¹æ¡ˆ
**æŠ€æœ¯æ¡†æ¶**ï¼šHarvard Business School Case Studiesã€Ivey Casesã€æ— ç°æˆæŠ€æœ¯æ¡†æ¶ï¼ˆå®šåˆ¶æ¡ˆä¾‹å¹³å°ï¼‰

#### 4. å­¦æœ¯ä¼šè®®æ¨¡æ‹Ÿ
**åŠŸèƒ½æè¿°**ï¼šæ¨¡æ‹ŸçœŸå®å­¦æœ¯ä¼šè®®çš„è®ºæ–‡å‘è¡¨ã€åŒè¡Œè¯„è®®å’Œå­¦æœ¯äº¤æµè¿‡ç¨‹ã€‚
**åº”ç”¨åœºæ™¯**ï¼šå­¦æœ¯å†™ä½œã€åŒè¡Œè¯„è®®ã€å›½é™…äº¤æµ
**å®ä¾‹**ï¼š
- è®¡ç®—æœºç§‘å­¦ï¼šå­¦ç”Ÿæäº¤AIç®—æ³•ç ”ç©¶ï¼Œè¿›è¡Œpeer reviewå’Œconference presentation
- æ–‡å­¦ç ”ç©¶ï¼šä¸¾åŠ"å½“ä»£æ–‡å­¦æ‰¹è¯„ç ”è®¨ä¼š"ï¼Œå­¦ç”Ÿå‘è¡¨è®ºæ–‡å¹¶æ¥å—ä¸“ä¸šè´¨ç–‘
**æŠ€æœ¯æ¡†æ¶**ï¼šEasyChairï¼ˆä¼šè®®ç®¡ç†ï¼‰ã€OpenReviewï¼ˆåŒè¡Œè¯„è®®ï¼‰ã€Zoom Webinar SDK

### é’ˆå¯¹å¤§å­¦æ•™å­¦çš„å¤šæ¨¡æ€å†…å®¹è¡¥å……

#### 1. å­¦æœ¯è®ºæ–‡æ™ºèƒ½è§£æ
**åŠŸèƒ½æè¿°**ï¼šAIè¾…åŠ©åˆ†æå’Œè§£è¯»å¤æ‚å­¦æœ¯æ–‡çŒ®ï¼Œæä¾›ç ”ç©¶è„‰ç»œå’ŒçŸ¥è¯†å›¾è°±ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šæ–‡çŒ®æŒ–æ˜ã€çŸ¥è¯†å›¾è°±ã€å¼•ç”¨åˆ†æã€è¶‹åŠ¿é¢„æµ‹
**åº”ç”¨åœºæ™¯**ï¼šæ–‡çŒ®ç»¼è¿°ã€ç ”ç©¶å‰æ²¿ã€å­¦æœ¯å†™ä½œ
**å®ä¾‹**ï¼š
- ç”Ÿç‰©åŒ»å­¦ï¼šè‡ªåŠ¨æå–Natureè®ºæ–‡çš„å…³é”®å‘ç°ï¼Œç”Ÿæˆå¯è§†åŒ–çš„ç ”ç©¶è„‰ç»œå›¾
- ç¤¾ä¼šå­¦ï¼šåˆ†æè¿‘20å¹´æ€§åˆ«ç ”ç©¶è®ºæ–‡ï¼Œå±•ç¤ºç†è®ºæ¼”è¿›å’Œç ”ç©¶çƒ­ç‚¹å˜åŒ–è¶‹åŠ¿
**æŠ€æœ¯æ¡†æ¶**ï¼šSemantic Scholar APIã€Web of Science APIã€OpenAlex APIã€Connected Papers

#### 2. è™šæ‹Ÿå®éªŒå®¤ä¸ä»¿çœŸ
**åŠŸèƒ½æè¿°**ï¼šé«˜ç²¾åº¦çš„ä¸“ä¸šå®éªŒç¯å¢ƒå’Œå¤æ‚ç³»ç»Ÿä»¿çœŸï¼Œæ”¯æŒæ— é™æ¬¡é‡å¤å®éªŒã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šç‰©ç†å»ºæ¨¡ã€æ•°æ®åˆ†æã€é£é™©é›¶æˆæœ¬ã€å‚æ•°å¯è°ƒèŠ‚
**åº”ç”¨åœºæ™¯**ï¼šç§‘å­¦å®éªŒã€ç³»ç»Ÿè®¾è®¡ã€é£é™©åˆ†æ
**å®ä¾‹**ï¼š
- åŒ–å­¦å·¥ç¨‹ï¼šè™šæ‹ŸåŒ–å·¥å‚ååº”å™¨è®¾è®¡ï¼Œå­¦ç”Ÿè°ƒæ•´å‚æ•°è§‚å¯Ÿäº§é‡å’Œå®‰å…¨æŒ‡æ ‡å˜åŒ–
- ç»æµå­¦ï¼šå®è§‚ç»æµæ¨¡å‹ä»¿çœŸï¼Œç ”ç©¶è´§å¸æ”¿ç­–å¯¹é€šèƒ€å’Œå°±ä¸šçš„é•¿æœŸåŠ¨æ€å½±å“
**æŠ€æœ¯æ¡†æ¶**ï¼šLabVIEWã€MATLAB Simulinkã€AnyLogicã€NetLogo

#### 3. ä¸“ä¸šæ•°æ®åº“é›†æˆ
**åŠŸèƒ½æè¿°**ï¼šæ•´åˆå­¦ç§‘ä¸“ä¸šæ•°æ®åº“ï¼Œæä¾›å®æ—¶æ•°æ®åˆ†æå’Œå¯è§†åŒ–åŠŸèƒ½ã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šå¤§æ•°æ®å¤„ç†ã€å®æ—¶æ›´æ–°ã€å¯è§†åŒ–åˆ†æã€APIæ¥å£é›†æˆ
**åº”ç”¨åœºæ™¯**ï¼šæ•°æ®åˆ†æã€å®è¯ç ”ç©¶ã€å¸‚åœºè°ƒç ”
**å®ä¾‹**ï¼š
- é‡‘èå­¦ï¼šé›†æˆBloombergç»ˆç«¯æ•°æ®ï¼Œå­¦ç”Ÿåˆ†æè‚¡ç¥¨å¸‚åœºæ³¢åŠ¨å’ŒæŠ•èµ„ç»„åˆä¼˜åŒ–
- æ–°é—»ä¼ æ’­ï¼šæ•´åˆå…¨çƒåª’ä½“æ•°æ®åº“ï¼Œç ”ç©¶èˆ†æƒ…ä¼ æ’­è§„å¾‹å’Œåª’ä½“å½±å“åŠ›æµ‹é‡
**æŠ€æœ¯æ¡†æ¶**ï¼šNewsAPIã€GDELT Projectã€Twitter APIã€æ— ç°æˆæŠ€æœ¯æ¡†æ¶ï¼ˆå®šåˆ¶åª’ä½“æ•°æ®å¹³å°ï¼‰

#### 4. è·¨æ–‡åŒ–å­¦ä¹ æ”¯æŒ
**åŠŸèƒ½æè¿°**ï¼šæ”¯æŒå›½é™…å­¦ç”Ÿå’Œè·¨æ–‡åŒ–å­¦æœ¯äº¤æµçš„å¤šå…ƒåŒ–å†…å®¹ç”Ÿæˆç³»ç»Ÿã€‚
**æŠ€æœ¯ç‰¹ç‚¹**ï¼šæ–‡åŒ–é€‚åº”ã€å¤šæ—¶åŒºåä½œã€å›½é™…æ ‡å‡†ã€æœ¬åœ°åŒ–å®šåˆ¶
**åº”ç”¨åœºæ™¯**ï¼šå›½é™…åˆä½œã€æ–‡åŒ–äº¤æµã€å…¨çƒè§†é‡åŸ¹å…»
**å®ä¾‹**ï¼š
- å›½é™…å…³ç³»ï¼šå¤šå›½å­¦ç”Ÿåˆä½œåˆ†æåœ°ç¼˜æ”¿æ²»äº‹ä»¶ï¼ŒAIæä¾›ä¸åŒæ–‡åŒ–è§†è§’çš„èƒŒæ™¯ä¿¡æ¯
- æ¯”è¾ƒæ–‡å­¦ï¼šä¸­å¤–å­¦ç”Ÿå…±åŒç ”è¯»èå£«æ¯”äºšä½œå“ï¼ŒAIç”Ÿæˆè·¨æ–‡åŒ–æ³¨é‡Šå’Œå†å²èƒŒæ™¯è§£æ
**æŠ€æœ¯æ¡†æ¶**ï¼šGoogle Translate APIã€Microsoft Translatorã€DeepL APIã€æ— ç°æˆæŠ€æœ¯æ¡†æ¶ï¼ˆè·¨æ–‡åŒ–å­¦ä¹ å¹³å°ï¼‰
"""

try:
    from mcp.server import Server
    from mcp.server.models import InitializationOptions
    from mcp.server.stdio import stdio_server
    from mcp import types
except ImportError:
    print("Warning: MCP library not available. Please install with: pip install mcp", file=sys.stderr)
    Server = None
    stdio_server = None
    types = None
    InitializationOptions = None

# è®¾ç½®æ—¥å¿—è¾“å‡ºåˆ°stderrä»¥é¿å…å¹²æ‰°stdioé€šä¿¡
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    stream=sys.stderr
)
logger = logging.getLogger(__name__)


class AIClient:
    """ç»Ÿä¸€çš„AIå®¢æˆ·ç«¯ï¼Œæ”¯æŒå¤šä¸ªAIæä¾›å•†"""
    
    def __init__(self, config: Dict[str, Any]):
        self.provider = config.get('provider', 'openai').lower()
        self.api_key = config.get('api_key')
        self.model = config.get('model', 'gpt-4o-mini')
        self.temperature = config.get('temperature', 0.7)
        self.max_tokens = config.get('max_tokens', 2000)
        self.base_url = config.get('base_url')
        
        # åˆå§‹åŒ–å®¢æˆ·ç«¯
        if self.provider == 'openai':
            if openai is None:
                raise ImportError("OpenAI library not available. Please install: pip install openai")
            self.client = openai.OpenAI(
                api_key=self.api_key,
                base_url=self.base_url
            )
        elif self.provider == 'anthropic':
            if anthropic is None:
                raise ImportError("Anthropic library not available. Please install: pip install anthropic")
            self.client = anthropic.Anthropic(
                api_key=self.api_key,
                base_url=self.base_url
            )
        else:
            raise ValueError(f"Unsupported AI provider: {self.provider}")
    
    async def chat_completion(self, messages: List[Dict[str, str]], system_prompt: str = None) -> str:
        """ç»Ÿä¸€çš„èŠå¤©å®Œæˆæ¥å£"""
        try:
            if self.provider == 'openai':
                # OpenAI API è°ƒç”¨
                chat_messages = []
                if system_prompt:
                    chat_messages.append({"role": "system", "content": system_prompt})
                chat_messages.extend(messages)
                
                response = self.client.chat.completions.create(
                    model=self.model,
                    messages=chat_messages,
                    temperature=self.temperature,
                    max_tokens=self.max_tokens
                )
                return response.choices[0].message.content
                
            elif self.provider == 'anthropic':
                # Anthropic API è°ƒç”¨
                user_message = "\n\n".join([msg["content"] for msg in messages if msg["role"] == "user"])
                
                response = self.client.messages.create(
                    model=self.model,
                    max_tokens=self.max_tokens,
                    temperature=self.temperature,
                    system=system_prompt or "",
                    messages=[{"role": "user", "content": user_message}]
                )
                return response.content[0].text
                
        except Exception as e:
            logger.error(f"AI API call failed: {e}")
            raise
    
    def is_available(self) -> bool:
        """æ£€æŸ¥AIå®¢æˆ·ç«¯æ˜¯å¦å¯ç”¨"""
        return self.api_key is not None and (
            (self.provider == 'openai' and openai is not None) or
            (self.provider == 'anthropic' and anthropic is not None)
        )


class TICMakerIntentDetector:
    """TICMakeræ„å›¾æ£€æµ‹å™¨"""
    
    INTENT_DETECTION_PROMPT = """
ä½ æ˜¯TICMakerçš„æ™ºèƒ½åŠ©æ‰‹ï¼Œä¸“é—¨æ£€æµ‹ç”¨æˆ·å¯¹è¯æ˜¯å¦æ¶‰åŠåˆ›ä½œæˆ–ä¿®æ”¹äº’åŠ¨æ•™å­¦è¯¾ç¨‹çš„æ„å›¾ã€‚

TICMakeræ˜¯ä¸“é—¨ç”¨äºåˆ›å»ºæ•™è‚²å†…å®¹çš„å·¥å…·ã€‚è¯·ä»”ç»†åˆ†æç”¨æˆ·çš„è¾“å…¥ï¼Œåˆ¤æ–­æ˜¯å¦ç¬¦åˆä»¥ä¸‹ä»»ä¸€æƒ…å†µï¼š
1. æ˜ç¡®è¦æ±‚åˆ›å»ºæ•™å­¦å†…å®¹ã€è¯¾ç¨‹ã€é¡µé¢æˆ–äº’åŠ¨æ´»åŠ¨
2. æè¿°äº†æ•™å­¦åœºæ™¯ã€å­¦ä¹ ç›®æ ‡æˆ–æ•™å­¦éœ€æ±‚  
3. æåˆ°äº†ç‰¹å®šçš„å­¦ç§‘å†…å®¹ã€çŸ¥è¯†ç‚¹éœ€è¦åˆ¶ä½œæˆäº’åŠ¨å½¢å¼
4. è¦æ±‚ä¿®æ”¹æˆ–ä¼˜åŒ–ç°æœ‰çš„æ•™å­¦å†…å®¹
5. è¯¢é—®å¦‚ä½•è®¾è®¡æ•™å­¦æ´»åŠ¨æˆ–è¯¾ç¨‹
6. åŒ…å«ä»»ä½•å­¦ç§‘é¢†åŸŸçš„ä¸“ä¸šæ¦‚å¿µæˆ–çŸ¥è¯†ç‚¹

è¯·ç›´æ¥å›ç­” "YES" æˆ– "NO"ï¼Œç„¶ååœ¨æ–°è¡Œç®€è¦è¯´æ˜åˆ¤æ–­ç†ç”±ï¼ˆä¸è¶…è¿‡50å­—ï¼‰ã€‚

æ­£é¢ç¤ºä¾‹ï¼ˆåº”è¯¥å›ç­”YESï¼‰ï¼š
ç”¨æˆ·è¾“å…¥ï¼š"å¸®æˆ‘åˆ›å»ºä¸€ä¸ªæ•°å­¦è¯¾çš„äº’åŠ¨æ¸¸æˆ"
å›ç­”ï¼šYES
ç”¨æˆ·æ˜ç¡®è¦æ±‚åˆ›å»ºæ•°å­¦å­¦ç§‘çš„äº’åŠ¨æ•™å­¦æ¸¸æˆ

ç”¨æˆ·è¾“å…¥ï¼š"åˆ¶ä½œå…³äºåŒ–å­¦ååº”çš„æ•™å­¦å†…å®¹"
å›ç­”ï¼šYES
ç”¨æˆ·è¦æ±‚åˆ¶ä½œåŒ–å­¦å­¦ç§‘çš„æ•™å­¦å†…å®¹

ç”¨æˆ·è¾“å…¥ï¼š"åˆ›å»ºä¸€ä¸ªæœºå™¨äººä¸‰å¤§å®šå¾‹çš„äº’åŠ¨è¯¾ç¨‹"
å›ç­”ï¼šYES
ç”¨æˆ·è¦æ±‚åˆ›å»ºå…³äºæœºå™¨äººå­¦/äººå·¥æ™ºèƒ½çš„æ•™å­¦è¯¾ç¨‹

ç”¨æˆ·è¾“å…¥ï¼š"è®¾è®¡ä¸€ä¸ªå…³äºDNAç»“æ„çš„å­¦ä¹ é¡µé¢"
å›ç­”ï¼šYES
ç”¨æˆ·è¦æ±‚è®¾è®¡ç”Ÿç‰©å­¦ç§‘çš„æ•™å­¦å†…å®¹

ç”¨æˆ·è¾“å…¥ï¼š"å¦‚ä½•åˆ¶ä½œè‹±è¯­å•è¯è®°å¿†è®­ç»ƒ"
å›ç­”ï¼šYES
ç”¨æˆ·è¯¢é—®åˆ¶ä½œè‹±è¯­æ•™å­¦æ´»åŠ¨çš„æ–¹æ³•

è´Ÿé¢ç¤ºä¾‹ï¼ˆåº”è¯¥å›ç­”NOï¼‰ï¼š
ç”¨æˆ·è¾“å…¥ï¼š"ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
å›ç­”ï¼šNO
è¿™æ˜¯å…³äºå¤©æ°”çš„ä¸€èˆ¬è¯¢é—®ï¼Œä¸æ•™å­¦å†…å®¹åˆ›ä½œæ— å…³

ç”¨æˆ·è¾“å…¥ï¼š"ä½ å¥½ï¼Œè¯·è‡ªæˆ‘ä»‹ç»"
å›ç­”ï¼šNO
è¿™æ˜¯ä¸€èˆ¬æ€§é—®å€™å’Œè¯¢é—®ï¼Œä¸æ¶‰åŠæ•™å­¦å†…å®¹

ç”¨æˆ·è¾“å…¥ï¼š"å¸®æˆ‘å†™ä¸€ä»½å·¥ä½œæŠ¥å‘Š"
å›ç­”ï¼šNO
è¿™æ˜¯å·¥ä½œæ–‡æ¡£å†™ä½œéœ€æ±‚ï¼Œä¸æ˜¯æ•™å­¦å†…å®¹åˆ›ä½œ
"""
    
    def __init__(self, ai_client: AIClient):
        self.ai_client = ai_client
    
    async def detect_intent(self, user_message: str) -> tuple[bool, str]:
        """æ£€æµ‹ç”¨æˆ·æ„å›¾
        
        Returns:
            tuple[bool, str]: (æ˜¯å¦ä¸ºåˆ›ä½œæ„å›¾, åˆ¤æ–­ç†ç”±)
        """
        try:
            messages = [{
                "role": "user",
                "content": f"ç”¨æˆ·è¾“å…¥ï¼š\"{user_message}\""
            }]
            
            response = await self.ai_client.chat_completion(
                messages=messages,
                system_prompt=self.INTENT_DETECTION_PROMPT
            )
            
            lines = response.strip().split('\n', 1)
            is_intent = lines[0].strip().upper() == 'YES'
            reason = lines[1].strip() if len(lines) > 1 else "æœªæä¾›ç†ç”±"
            
            logger.info(f"æ„å›¾æ£€æµ‹ç»“æœ: {is_intent}, ç†ç”±: {reason}")
            return is_intent, reason
            
        except Exception as e:
            logger.error(f"æ„å›¾æ£€æµ‹å¤±è´¥: {e}")
            # é»˜è®¤è®¤ä¸ºæ˜¯åˆ›ä½œæ„å›¾ï¼Œé¿å…é˜»æ–­ç”¨æˆ·è¯·æ±‚
            return True, "æ„å›¾æ£€æµ‹æœåŠ¡ä¸å¯ç”¨ï¼Œé»˜è®¤å¤„ç†"


class TICMakerContentGenerator:
    """TICMakerå†…å®¹ç”Ÿæˆå™¨"""
    
    def __init__(self, ai_client: AIClient):
        self.ai_client = ai_client
    
    async def analyze_requirements(self, user_message: str, context: Dict[str, Any]) -> Dict[str, Any]:
        """åˆ†æç”¨æˆ·éœ€æ±‚å¹¶ç”Ÿæˆæ–¹æ¡ˆ"""
        
        analysis_prompt = f"""
åŸºäºç”¨æˆ·çš„æ•™å­¦éœ€æ±‚ï¼Œè¯·åˆ†æå¹¶æ¨èæœ€ä½³çš„äº’åŠ¨è¯¾ç¨‹æ–¹æ¡ˆã€‚

ç”¨æˆ·éœ€æ±‚ï¼š{user_message}
ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š{json.dumps(context, ensure_ascii=False, indent=2)}

è¯·ä»¥JSONæ ¼å¼è¿”å›åˆ†æç»“æœï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
{{
    "subject": "å­¦ç§‘é¢†åŸŸ",
    "topic": "å…·ä½“ä¸»é¢˜",
    "learning_objectives": ["å­¦ä¹ ç›®æ ‡1", "å­¦ä¹ ç›®æ ‡2"],
    "target_audience": "ç›®æ ‡å—ä¼—ï¼ˆå¦‚ï¼šå°å­¦ç”Ÿã€åˆä¸­ç”Ÿç­‰ï¼‰",
    "recommended_template": "æ¨èæ¨¡æ¿ç±»å‹ï¼ˆbasic/interactive/educationalï¼‰",
    "recommended_style": "æ¨èæ ·å¼ï¼ˆmodern/classic/colorfulï¼‰",
    "interactive_elements": ["äº’åŠ¨å…ƒç´ 1", "äº’åŠ¨å…ƒç´ 2"],
    "content_suggestions": "å…·ä½“å†…å®¹å»ºè®®",
    "course_title": "æ¨èçš„è¯¾ç¨‹æ ‡é¢˜"
}}

è¯·ç¡®ä¿è¿”å›æœ‰æ•ˆçš„JSONæ ¼å¼ã€‚
"""
        
        try:
            messages = [{"role": "user", "content": analysis_prompt}]
            response = await self.ai_client.chat_completion(
                messages=messages,
                system_prompt=TICMAKER_PROMPT
            )
            
            # è§£æJSONå“åº” - æå–å¯èƒ½çš„JSONå†…å®¹
            try:
                # å°è¯•ç›´æ¥è§£æ
                analysis = json.loads(response.strip())
            except json.JSONDecodeError:
                # å¦‚æœç›´æ¥è§£æå¤±è´¥ï¼Œå°è¯•ä»å“åº”ä¸­æå–JSON
                import re
                json_match = re.search(r'\{.*\}', response, re.DOTALL)
                if json_match:
                    try:
                        analysis = json.loads(json_match.group(0))
                    except json.JSONDecodeError:
                        raise ValueError("æ— æ³•ä»AIå“åº”ä¸­æå–æœ‰æ•ˆJSON")
                else:
                    raise ValueError("AIå“åº”ä¸­æœªæ‰¾åˆ°JSONå†…å®¹")
            
            logger.info(f"éœ€æ±‚åˆ†æå®Œæˆ: {analysis.get('topic', 'æœªçŸ¥')} - {analysis.get('recommended_template', 'basic')}æ¨¡æ¿")
            return analysis
            
        except (json.JSONDecodeError, ValueError) as e:
            logger.error(f"AIå“åº”è§£æå¤±è´¥: {e}")
            logger.debug(f"åŸå§‹AIå“åº”: {response[:500]}...")
            # è¿”å›é»˜è®¤åˆ†æç»“æœ
            return {
                "subject": "é€šç”¨",
                "topic": "äº’åŠ¨å­¦ä¹ ",
                "learning_objectives": ["æå‡å­¦ä¹ å…´è¶£", "åŠ å¼ºçŸ¥è¯†ç†è§£"],
                "target_audience": "å­¦ç”Ÿ",
                "recommended_template": "basic",
                "recommended_style": "modern",
                "interactive_elements": ["é—®ç­”äº’åŠ¨", "ç‚¹å‡»äº¤äº’"],
                "content_suggestions": user_message,
                "course_title": "äº’åŠ¨å­¦ä¹ è¯¾ç¨‹"
            }
        except Exception as e:
            logger.error(f"éœ€æ±‚åˆ†æå¤±è´¥: {e}")
            raise


class TICMakerMCPServer:
    """
    TICMakerä¸“ç”¨MCPæœåŠ¡å™¨ - å¤„ç†äº’åŠ¨æ•™å­¦HTMLé¡µé¢åˆ›å»ºå’Œä¿®æ”¹
    
    åŠŸèƒ½ç‰¹æ€§ï¼š
    - æ™ºèƒ½æ¨¡æ¿é€‰æ‹©ï¼ˆåŸºç¡€ã€äº’åŠ¨ã€æ•™è‚²ç±»å‹ï¼‰
    - å¤šç§æ ·å¼é£æ ¼æ”¯æŒ
    - å®‰å…¨çš„æ–‡ä»¶è·¯å¾„ç®¡ç†
    - è¯¦ç»†çš„æ“ä½œæ—¥å¿—è®°å½•
    """
    
    def __init__(self):
        if Server is None:
            raise ImportError("MCP library not available")
            
        self.server = Server("ticmaker-server")
        self.output_dir = Path("./ticmaker_output")
        self.output_dir.mkdir(exist_ok=True)
        
        # åŠ è½½é…ç½®å’Œåˆå§‹åŒ–AIå®¢æˆ·ç«¯
        self._load_config()
        self._setup_ai_components()
        self._setup_tools()
    
    def _load_config(self):
        """ä».simacode/config.yamlåŠ è½½é…ç½®"""
        config_path = Path(".simacode/config.yaml")
        self.config = {}
        
        if config_path.exists():
            try:
                with open(config_path, 'r', encoding='utf-8') as f:
                    self.config = yaml.safe_load(f)
                logger.info(f"é…ç½®åŠ è½½æˆåŠŸ: {config_path}")
            except Exception as e:
                logger.warning(f"é…ç½®åŠ è½½å¤±è´¥: {e}, ä½¿ç”¨é»˜è®¤é…ç½®")
        else:
            logger.warning(f"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {config_path}, ä½¿ç”¨é»˜è®¤é…ç½®")
    
    def _setup_ai_components(self):
        """è®¾ç½®AIç»„ä»¶"""
        ai_config = self.config.get('ai', {})
        
        try:
            # åˆå§‹åŒ–AIå®¢æˆ·ç«¯
            self.ai_client = AIClient(ai_config)
            
            if self.ai_client.is_available():
                # åˆå§‹åŒ–æ„å›¾æ£€æµ‹å™¨å’Œå†…å®¹ç”Ÿæˆå™¨
                self.intent_detector = TICMakerIntentDetector(self.ai_client)
                self.content_generator = TICMakerContentGenerator(self.ai_client)
                logger.info(f"AIç»„ä»¶åˆå§‹åŒ–æˆåŠŸ: {self.ai_client.provider} - {self.ai_client.model}")
                self.ai_enabled = True
            else:
                logger.warning("AIå®¢æˆ·ç«¯é…ç½®ä¸å®Œæ•´ï¼Œå°†ä½¿ç”¨ä¼ ç»Ÿæ¨¡å¼")
                self.ai_enabled = False
                
        except Exception as e:
            logger.error(f"AIç»„ä»¶åˆå§‹åŒ–å¤±è´¥: {e}")
            logger.warning("å°†ä½¿ç”¨ä¼ ç»Ÿæ¨¡å¼è¿è¡Œ")
            self.ai_enabled = False
    
    def _setup_tools(self):
        @self.server.list_tools()
        async def list_tools(params: Optional[types.PaginatedRequestParams] = None) -> List[types.Tool]:
            return [
                types.Tool(
                    name="create_interactive_course",
                    description="åˆ›å»ºæˆ–ä¿®æ”¹äº’åŠ¨æ•™å­¦è¯¾ç¨‹",
                    inputSchema={
                        "type": "object",
                        "properties": {
                            "message": {
                                "type": "string", 
                                "description": "ç”¨æˆ·éœ€æ±‚æè¿°"
                            },
                            "context": {
                                "type": "object", 
                                "description": "è¯·æ±‚ä¸Šä¸‹æ–‡ä¿¡æ¯",
                                "properties": {
                                    "scope": {"type": "string", "description": "ä½œç”¨åŸŸï¼Œé€šå¸¸ä¸º'ticmaker'"},
                                    "courseTitle": {"type": "string", "description": "è¯¾ç¨‹æ ‡é¢˜"},
                                    "file_path": {"type": "string", "description": "å¯é€‰çš„æ–‡ä»¶è·¯å¾„"},
                                    "template": {"type": "string", "description": "æ¨¡æ¿ç±»å‹: basic, interactive, educational", "enum": ["basic", "interactive", "educational"]},
                                    "style": {"type": "string", "description": "æ ·å¼é£æ ¼: modern, classic, colorful", "enum": ["modern", "classic", "colorful"]}
                                }
                            },
                            "session_id": {"type": "string", "description": "ä¼šè¯æ ‡è¯†ç¬¦"},
                            "source": {"type": "string", "description": "è¯·æ±‚æ¥æº: CLI, API, ReAct"},
                            "operation": {
                                "type": "string", 
                                "description": "æ“ä½œç±»å‹: createï¼ˆåˆ›å»ºæ–°é¡µé¢ï¼‰æˆ–modifyï¼ˆä¿®æ”¹ç°æœ‰é¡µé¢ï¼‰",
                                "enum": ["create", "modify"]
                            }
                        },
                        "required": ["message"]
                    }
                )
            ]
        
        @self.server.call_tool()
        async def call_tool(name: str, arguments: Dict[str, Any]) -> List[types.TextContent]:
            if name == "create_interactive_course":
                return await self._create_interactive_course(arguments)
            else:
                raise ValueError(f"Unknown tool: {name}")
    
    async def _create_interactive_course(self, args: Dict[str, Any]) -> List[types.TextContent]:
        """åˆ›å»ºæˆ–ä¿®æ”¹äº’åŠ¨æ•™å­¦è¯¾ç¨‹"""
        message = args.get("message", "")
        context = args.get("context", {})
        session_id = args.get("session_id", "unknown")
        source = args.get("source", "unknown")
        operation = args.get("operation", "create")
        
        # è¯¦ç»†çš„è¯·æ±‚æ—¥å¿—è®°å½•
        logger.info("=" * 80)
        logger.info("ğŸ¯ TICMaker - äº’åŠ¨æ•™å­¦è¯¾ç¨‹åˆ›å»ºè¯·æ±‚")
        logger.info(f"ğŸ“‹ æ“ä½œç±»å‹: {operation}")
        logger.info(f"ğŸŒ è¯·æ±‚æ¥æº: {source}")
        logger.info(f"ğŸ”— ä¼šè¯ID: {session_id}")
        logger.info(f"ğŸ’¬ ç”¨æˆ·éœ€æ±‚: {message}")
        logger.info(f"ğŸ“„ è¯¾ç¨‹æ ‡é¢˜: {context.get('courseTitle', 'æœªæŒ‡å®š')}")
        logger.info(f"ğŸ¨ æ¨¡æ¿ç±»å‹: {context.get('template', 'æ™ºèƒ½é€‰æ‹©')}")
        logger.info(f"âœ¨ æ ·å¼é£æ ¼: {context.get('style', 'modern')}")
        logger.info("=" * 80)
        
        # ç¡®å®šæ–‡ä»¶è·¯å¾„
        file_path = context.get("file_path")
        if not file_path:
            # ç”Ÿæˆé»˜è®¤æ–‡ä»¶å
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            filename = f"ticmaker_page_{timestamp}_{session_id[:8]}.html"
            file_path = self.output_dir / filename
        else:
            file_path = Path(file_path)
            # ç¡®ä¿æ–‡ä»¶åœ¨å®‰å…¨ç›®å½•å†…
            if not str(file_path).startswith(str(self.output_dir)):
                file_path = self.output_dir / Path(file_path).name
        
        try:
            # AIæ„å›¾æ£€æµ‹ï¼ˆå¦‚æœå¯ç”¨ï¼‰
            if self.ai_enabled:
                is_creation_intent, reason = await self.intent_detector.detect_intent(message)
                logger.info(f"ğŸ¤– AIæ„å›¾æ£€æµ‹: {is_creation_intent}, åŸå› : {reason}")
                
                if not is_creation_intent:
                    return [
                        types.TextContent(
                            type="text",
                            text=f"âŒ æ£€æµ‹åˆ°éè¯¾ç¨‹åˆ›ä½œè¯·æ±‚\n"
                                 f"åŸå› : {reason}\n\n"
                                 f"TICMakerä¸“é—¨ç”¨äºåˆ›å»ºå’Œä¿®æ”¹äº’åŠ¨æ•™å­¦è¯¾ç¨‹ã€‚\n"
                                 f"è¯·æè¿°æ‚¨æƒ³è¦åˆ›å»ºçš„æ•™å­¦å†…å®¹ã€è¯¾ç¨‹æˆ–äº’åŠ¨æ´»åŠ¨ã€‚"
                        )
                    ]
            
            # æ£€æŸ¥æ˜¯å¦ä¸ºä¿®æ”¹æ“ä½œ
            if operation == "modify" and file_path.exists():
                # è¯»å–ç°æœ‰å†…å®¹
                existing_content = file_path.read_text(encoding='utf-8')
                html_content = await self._modify_html_content(existing_content, message, context)
            else:
                # åˆ›å»ºæ–°é¡µé¢ - ä½¿ç”¨AIå¢å¼ºç”Ÿæˆ
                html_content = await self._generate_html_content_ai_enhanced(message, context)
            
            # å†™å…¥æ–‡ä»¶
            file_path.write_text(html_content, encoding='utf-8')
            
            # è®°å½•æˆåŠŸ
            result_msg = f"âœ… äº’åŠ¨è¯¾ç¨‹å·²{'ä¿®æ”¹' if operation == 'modify' else 'åˆ›å»º'}æˆåŠŸ"
            logger.info(f"\n{result_msg}")
            logger.info(f"æ–‡ä»¶è·¯å¾„: {file_path}")
            logger.info(f"æ–‡ä»¶å¤§å°: {file_path.stat().st_size} bytes")
            
            return [
                types.TextContent(
                    type="text",
                    text=f"{result_msg}\n"
                         f"æ–‡ä»¶è·¯å¾„: {file_path}\n"
                         f"æ–‡ä»¶å¤§å°: {file_path.stat().st_size} bytes\n"
                         f"ç”¨æˆ·éœ€æ±‚: {message}\n"
                         f"å¤„ç†æ¥æº: {source}æ¨¡å¼"
                )
            ]
            
        except Exception as e:
            error_msg = f"âŒ äº’åŠ¨è¯¾ç¨‹åˆ›å»ºå¤±è´¥: {str(e)}"
            logger.error(f"\n{error_msg}")
            logger.error(f"Interactive course creation error: {e}")
            
            return [
                types.TextContent(
                    type="text",
                    text=error_msg
                )
            ]
    
    async def _generate_html_content_ai_enhanced(self, message: str, context: Dict[str, Any]) -> str:
        """ä½¿ç”¨AIå¢å¼ºçš„æ–¹å¼ç”Ÿæˆäº’åŠ¨è¯¾ç¨‹å†…å®¹"""
        if self.ai_enabled:
            try:
                # ä½¿ç”¨AIåˆ†æç”¨æˆ·éœ€æ±‚
                logger.info("ğŸ¤– æ­£åœ¨ä½¿ç”¨AIåˆ†æç”¨æˆ·éœ€æ±‚...")
                analysis = await self.content_generator.analyze_requirements(message, context)
                
                # åˆå¹¶AIåˆ†æç»“æœåˆ°context
                enhanced_context = context.copy()
                enhanced_context.update({
                    "courseTitle": analysis.get("course_title", context.get("courseTitle", "")),
                    "template": context.get("template") or analysis.get("recommended_template", "basic"),
                    "style": context.get("style") or analysis.get("recommended_style", "modern"),
                    "ai_analysis": analysis
                })
                
                logger.info(f"ğŸ¯ AIæ¨èæ–¹æ¡ˆ: {analysis['recommended_template']}æ¨¡æ¿ + {analysis['recommended_style']}é£æ ¼")
                
                # ä½¿ç”¨AIå¢å¼ºçš„contextç”Ÿæˆå†…å®¹
                return await self._generate_html_content(message, enhanced_context)
                
            except Exception as e:
                logger.error(f"AIå¢å¼ºç”Ÿæˆå¤±è´¥ï¼Œå›é€€åˆ°ä¼ ç»Ÿæ¨¡å¼: {e}")
                return await self._generate_html_content(message, context)
        else:
            # AIæœªå¯ç”¨ï¼Œä½¿ç”¨ä¼ ç»Ÿæ–¹å¼
            return await self._generate_html_content(message, context)
    
    async def _generate_html_content(self, message: str, context: Dict[str, Any]) -> str:
        """æ ¹æ®ç”¨æˆ·éœ€æ±‚ç”Ÿæˆäº’åŠ¨è¯¾ç¨‹å†…å®¹"""
        # ä¼˜å…ˆä½¿ç”¨AIåˆ†æç»“æœï¼Œå¦åˆ™ä½¿ç”¨ä¼ ç»Ÿæå–æ–¹æ³•
        ai_analysis = context.get("ai_analysis", {})
        title = ai_analysis.get("course_title") or self._extract_title_from_message(message)
        style = context.get("style", "modern")
        template = context.get("template", "basic")
        course_title = context.get("courseTitle", "")
        
        # æ ¹æ®æ¨¡æ¿ç±»å‹ç”Ÿæˆç›¸åº”çš„HTMLå†…å®¹
        if template == "interactive":
            html_content = self._generate_interactive_template(title, message, style, course_title, ai_analysis)
        elif template == "educational":
            html_content = self._generate_educational_template(title, message, style, course_title, ai_analysis)
        else:
            # é»˜è®¤ä½¿ç”¨åŸºç¡€æ¨¡æ¿ï¼Œä½†æ ¹æ®æ¶ˆæ¯å†…å®¹æ™ºèƒ½é€‰æ‹©
            if any(keyword in message.lower() for keyword in ["äº’åŠ¨", "æ¸¸æˆ", "ç‚¹å‡»", "æŒ‰é’®"]):
                html_content = self._generate_interactive_template(title, message, style, course_title, ai_analysis)
            elif any(keyword in message.lower() for keyword in ["å­¦ä¹ ", "æ•™å­¦", "è¯¾ç¨‹", "ç»ƒä¹ "]):
                html_content = self._generate_educational_template(title, message, style, course_title, ai_analysis)
            else:
                html_content = self._generate_basic_template(title, message, style, course_title, ai_analysis)
        
        return html_content
    
    async def _modify_html_content(self, existing_content: str, message: str, context: Dict[str, Any]) -> str:
        """ä¿®æ”¹ç°æœ‰è¯¾ç¨‹å†…å®¹"""
        # ç®€å•çš„ä¿®æ”¹é€»è¾‘ - åœ¨å®é™…åº”ç”¨ä¸­å¯ä»¥æ›´å¤æ‚
        modification_note = f"\n<!-- ä¿®æ”¹è®°å½•: {datetime.now().isoformat()} - {message} -->\n"
        
        # åœ¨</body>å‰æ’å…¥ä¿®æ”¹å†…å®¹
        if "</body>" in existing_content:
            insert_content = f'<div class="modification-note" style="margin-top: 20px; padding: 10px; background-color: #f0f8ff; border: 1px solid #ccc;">\n<strong>æœ€æ–°ä¿®æ”¹:</strong> {message}\n<small>ä¿®æ”¹æ—¶é—´: {datetime.now().strftime("%Y-%m-%d %H:%M:%S")}</small>\n</div>\n'
            existing_content = existing_content.replace("</body>", f"{insert_content}</body>")
        
        # æ·»åŠ ä¿®æ”¹æ³¨é‡Š
        existing_content += modification_note
        
        return existing_content
    
    def _extract_title_from_message(self, message: str) -> str:
        """ä»ç”¨æˆ·æ¶ˆæ¯ä¸­æå–æ ‡é¢˜"""
        # æ™ºèƒ½æ ‡é¢˜æå–é€»è¾‘
        message_lower = message.lower()
        
        # æ£€æµ‹ç‰¹å®šç±»å‹å†…å®¹
        if any(keyword in message_lower for keyword in ["æ¸¸æˆ", "å°æ¸¸æˆ", "äº’åŠ¨æ¸¸æˆ"]):
            return "äº’åŠ¨æ•™å­¦æ¸¸æˆ"
        elif any(keyword in message_lower for keyword in ["æ´»åŠ¨", "ç»ƒä¹ ", "è®­ç»ƒ"]):
            return "æ•™å­¦æ´»åŠ¨é¡µé¢"
        elif any(keyword in message_lower for keyword in ["è¯¾ç¨‹", "è¯¾å ‚", "æ•™å­¦"]):
            return "è¯¾ç¨‹å†…å®¹é¡µé¢"
        elif any(keyword in message_lower for keyword in ["æµ‹éªŒ", "è€ƒè¯•", "æµ‹è¯•"]):
            return "åœ¨çº¿æµ‹éªŒé¡µé¢"
        elif any(keyword in message_lower for keyword in ["æ¼”ç¤º", "å±•ç¤º", "ä»‹ç»"]):
            return "å†…å®¹å±•ç¤ºé¡µé¢"
        
        # é»˜è®¤æ ‡é¢˜
        return "TICMakeräº’åŠ¨é¡µé¢"
    
    def _generate_ai_analysis_section(self, ai_analysis: Dict[str, Any]) -> str:
        """ç”ŸæˆAIåˆ†æç»“æœçš„HTMLå±•ç¤ºéƒ¨åˆ†"""
        if not ai_analysis:
            return ""
        
        analysis_html = '<div class="ai-analysis" style="background: #e8f5e8; padding: 15px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #4caf50;">'
        analysis_html += '<h3 style="color: #2e7d32; margin-top: 0;">ğŸ¤– AIæ™ºèƒ½åˆ†æ</h3>'
        
        if ai_analysis.get("subject"):
            analysis_html += f'<p><strong>å­¦ç§‘é¢†åŸŸ:</strong> {ai_analysis["subject"]}</p>'
        
        if ai_analysis.get("topic"):
            analysis_html += f'<p><strong>æ•™å­¦ä¸»é¢˜:</strong> {ai_analysis["topic"]}</p>'
        
        if ai_analysis.get("target_audience"):
            analysis_html += f'<p><strong>ç›®æ ‡å—ä¼—:</strong> {ai_analysis["target_audience"]}</p>'
        
        if ai_analysis.get("learning_objectives"):
            analysis_html += '<p><strong>å­¦ä¹ ç›®æ ‡:</strong></p><ul>'
            for obj in ai_analysis["learning_objectives"]:
                analysis_html += f'<li>{obj}</li>'
            analysis_html += '</ul>'
        
        if ai_analysis.get("interactive_elements"):
            analysis_html += '<p><strong>æ¨èäº’åŠ¨å…ƒç´ :</strong></p><ul>'
            for element in ai_analysis["interactive_elements"]:
                analysis_html += f'<li>{element}</li>'
            analysis_html += '</ul>'
        
        if ai_analysis.get("content_suggestions"):
            analysis_html += f'<p><strong>å†…å®¹å»ºè®®:</strong> {ai_analysis["content_suggestions"]}</p>'
        
        analysis_html += '</div>'
        return analysis_html
    
    def _generate_basic_template(self, title: str, message: str, style: str, course_title: str = "", ai_analysis: Dict[str, Any] = None) -> str:
        """ç”ŸæˆåŸºç¡€HTMLæ¨¡æ¿"""
        return f"""<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <style>
        body {{
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }}
        .container {{
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }}
        h1 {{
            color: #4a5568;
            text-align: center;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }}
        .content {{
            margin-top: 20px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 8px;
        }}
        .timestamp {{
            text-align: center;
            color: #666;
            font-size: 0.9em;
            margin-top: 20px;
        }}
    </style>
</head>
<body>
    <div class="container">
        <h1>{title}</h1>
        <div class="content">
            {f'<p><strong>è¯¾ç¨‹:</strong> {course_title}</p>' if course_title else ''}
            <p><strong>ç”¨æˆ·éœ€æ±‚:</strong> {message}</p>
            {self._generate_ai_analysis_section(ai_analysis) if ai_analysis else ''}
            <p>è¿™æ˜¯ç”±TICMakerç”Ÿæˆçš„äº’åŠ¨æ•™å­¦è¯¾ç¨‹ï¼Œä¸“ä¸ºç°ä»£åŒ–è¯¾å ‚æ•™å­¦è®¾è®¡ã€‚</p>
        </div>
        <div class="timestamp">
            ç”Ÿæˆæ—¶é—´: {datetime.now().strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S")}
        </div>
    </div>
</body>
</html>"""
    
    def _generate_interactive_template(self, title: str, message: str, style: str, course_title: str = "", ai_analysis: Dict[str, Any] = None) -> str:
        """ç”Ÿæˆäº’åŠ¨HTMLæ¨¡æ¿"""
        return f"""<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <style>
        body {{
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            min-height: 100vh;
        }}
        .game-container {{
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }}
        h1 {{
            text-align: center;
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 30px;
        }}
        .interactive-button {{
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s;
        }}
        .interactive-button:hover {{
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }}
        .result-area {{
            margin-top: 20px;
            padding: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            min-height: 100px;
        }}
    </style>
</head>
<body>
    <div class="game-container">
        <h1>{title}</h1>
        {f'<h2>ğŸ“š è¯¾ç¨‹: {course_title}</h2>' if course_title else ''}
        <p><strong>ç”¨æˆ·éœ€æ±‚:</strong> {message}</p>
        {self._generate_ai_analysis_section(ai_analysis) if ai_analysis else ''}
        
        <div class="interaction-area">
            <button class="interactive-button" onclick="showMessage('å¤ªæ£’äº†ï¼ä½ æ­£åœ¨ä½“éªŒTICMakeråˆ›å»ºçš„äº’åŠ¨å†…å®¹ï¼')">ç‚¹å‡»äº’åŠ¨</button>
            <button class="interactive-button" onclick="changeColor()">æ”¹å˜é¢œè‰²</button>
            <button class="interactive-button" onclick="addContent()">æ·»åŠ å†…å®¹</button>
        </div>
        
        <div id="result" class="result-area">
            ç‚¹å‡»ä¸Šé¢çš„æŒ‰é’®å¼€å§‹äº’åŠ¨ä½“éªŒï¼
        </div>
        
        <div class="timestamp">
            åˆ›å»ºæ—¶é—´: {datetime.now().strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S")}
        </div>
    </div>
    
    <script>
        function showMessage(msg) {{
            document.getElementById('result').innerHTML = '<h3>' + msg + '</h3>';
        }}
        
        function changeColor() {{
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            document.querySelector('.game-container').style.background = randomColor;
            document.getElementById('result').innerHTML = '<h3>èƒŒæ™¯é¢œè‰²å·²æ”¹å˜ä¸º: ' + randomColor + '</h3>';
        }}
        
        function addContent() {{
            const content = document.getElementById('result');
            content.innerHTML += '<p>æ–°æ·»åŠ çš„äº’åŠ¨å†…å®¹ - ' + new Date().toLocaleTimeString() + '</p>';
        }}
    </script>
</body>
</html>"""
    
    def _generate_educational_template(self, title: str, message: str, style: str, course_title: str = "", ai_analysis: Dict[str, Any] = None) -> str:
        """ç”Ÿæˆæ•™è‚²ç±»HTMLæ¨¡æ¿"""
        return f"""<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <style>
        body {{
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: #2d3436;
        }}
        .edu-container {{
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }}
        .header {{
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            padding: 30px;
            text-align: center;
            color: white;
        }}
        .content-area {{
            padding: 40px;
        }}
        .lesson-section {{
            margin-bottom: 30px;
            padding: 20px;
            border-left: 5px solid #74b9ff;
            background: #f8f9fa;
            border-radius: 0 10px 10px 0;
        }}
        .quiz-button {{
            background: #00b894;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px 5px;
        }}
        .quiz-button:hover {{
            background: #00a085;
            transform: translateY(-1px);
        }}
    </style>
</head>
<body>
    <div class="edu-container">
        <div class="header">
            <h1>{title}</h1>
            {f'<h2>{course_title}</h2>' if course_title else ''}
            <p>äº’åŠ¨æ•™å­¦å†…å®¹å¹³å°</p>
        </div>
        
        <div class="content-area">
            <div class="lesson-section">
                <h2>ğŸ“š å­¦ä¹ ç›®æ ‡</h2>
                <p><strong>ç”¨æˆ·éœ€æ±‚:</strong> {message}</p>
                {self._generate_ai_analysis_section(ai_analysis) if ai_analysis else ''}
                <p>æœ¬è¯¾ç¨‹æ—¨åœ¨é€šè¿‡äº’åŠ¨æ–¹å¼æå‡å­¦ä¹ ä½“éªŒå’Œæ•ˆæœã€‚</p>
            </div>
            
            <div class="lesson-section">
                <h2>ğŸ¯ äº’åŠ¨ç»ƒä¹ </h2>
                <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®è¿›è¡Œäº’åŠ¨å­¦ä¹ ï¼š</p>
                <button class="quiz-button" onclick="startQuiz()">å¼€å§‹æµ‹éªŒ</button>
                <button class="quiz-button" onclick="showTip()">å­¦ä¹ æç¤º</button>
                <button class="quiz-button" onclick="showProgress()">å­¦ä¹ è¿›åº¦</button>
            </div>
            
            <div id="interactive-area" class="lesson-section">
                <h2>ğŸ’¡ äº’åŠ¨åŒºåŸŸ</h2>
                <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹äº’åŠ¨å­¦ä¹ ...</p>
            </div>
            
            <div class="lesson-section">
                <small>åˆ›å»ºæ—¶é—´: {datetime.now().strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S")}</small>
            </div>
        </div>
    </div>
    
    <script>
        function startQuiz() {{
            document.getElementById('interactive-area').innerHTML = 
                '<h2>ğŸ“ å¿«é€Ÿæµ‹éªŒ</h2>' +
                '<p>1. TICMakeræ˜¯ä»€ä¹ˆï¼Ÿ</p>' +
                '<button class="quiz-button" onclick="showAnswer()">äº’åŠ¨æ•™å­¦å·¥å…·</button>' +
                '<button class="quiz-button" onclick="showAnswer()">æ™®é€šè½¯ä»¶</button>';
        }}
        
        function showTip() {{
            document.getElementById('interactive-area').innerHTML = 
                '<h2>ğŸ’¡ å­¦ä¹ æç¤º</h2>' +
                '<p>â€¢ äº’åŠ¨å­¦ä¹ æ¯”è¢«åŠ¨æ¥å—æ›´æœ‰æ•ˆ</p>' +
                '<p>â€¢ åŠæ—¶åé¦ˆæœ‰åŠ©äºçŸ¥è¯†å·©å›º</p>' +
                '<p>â€¢ å¤šæ„Ÿå®˜å‚ä¸æå‡è®°å¿†æ•ˆæœ</p>';
        }}
        
        function showProgress() {{
            document.getElementById('interactive-area').innerHTML = 
                '<h2>ğŸ“Š å­¦ä¹ è¿›åº¦</h2>' +
                '<div style="background: #ddd; border-radius: 10px; padding: 3px;">' +
                '<div style="background: #00b894; height: 20px; width: 75%; border-radius: 8px; text-align: center; line-height: 20px; color: white;">75% å®Œæˆ</div>' +
                '</div>';
        }}
        
        function showAnswer() {{
            document.getElementById('interactive-area').innerHTML = 
                '<h2>âœ… æ­£ç¡®ç­”æ¡ˆ</h2>' +
                '<p>TICMakeræ˜¯ä¸“é—¨ç”¨äºåˆ›å»ºäº’åŠ¨æ•™å­¦å†…å®¹çš„AIå·¥å…·ï¼</p>';
        }}
    </script>
</body>
</html>"""
    

    async def run(self):
        """è¿è¡ŒMCPæœåŠ¡å™¨ä½¿ç”¨stdioä¼ è¾“"""
        logger.info("ğŸš€ å¯åŠ¨TICMaker MCPæœåŠ¡å™¨ (stdio)")
        logger.info(f"ğŸ“ è¾“å‡ºç›®å½•: {self.output_dir}")
        
        # ä½¿ç”¨stdioæœåŠ¡å™¨
        async with stdio_server() as (read_stream, write_stream):
            init_options = InitializationOptions(
                server_name="ticmaker-server",
                server_version="1.0.0",
                capabilities=types.ServerCapabilities(
                    tools=types.ToolsCapability(),
                    logging={}
                )
            )
            
            await self.server.run(
                read_stream, 
                write_stream, 
                init_options
            )


def main():
    """ä¸»å…¥å£ç‚¹"""
    try:
        server_instance = TICMakerMCPServer()
        logger.info("Starting TICMaker MCP server")
        
        asyncio.run(server_instance.run())
        
    except KeyboardInterrupt:
        logger.info("Server stopped by user")
    except Exception as e:
        logger.error(f"Server error: {e}")
        import traceback
        traceback.print_exc(file=sys.stderr)
        sys.exit(1)


if __name__ == "__main__":
    main()
